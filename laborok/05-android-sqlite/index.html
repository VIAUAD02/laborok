
<!doctype html>
<html lang="hu" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Tóth Tibor, Gincsai Gábor, Ekler Péter, Gazdi László, Pomázi Krisztián, Kövesdán Gábor">
      
      
      
        <link rel="prev" href="../04-android-ui-charts/">
      
      
        <link rel="next" href="../06-android-room/">
      
      <link rel="icon" href="../../favicon.ico">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.4">
    
    
      
        <title>Labor 05 - SQLite - Rajzoló alkalmazás - BMEVIAUAD02 - Mobil- és webes szoftverek laborfeladatok</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.9c788c91.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/timeago.css">
    
      <link rel="stylesheet" href="../../extra-material-theme.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="aut" data-md-color-primary="red" data-md-color-accent="red">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#labor-05-sqlite-rajzolo-alkalmazas" class="md-skip">
          Kihagyás
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Élőfej">
    <a href="../.." title="BMEVIAUAD02 - Mobil- és webes szoftverek laborfeladatok" class="md-header__button md-logo" aria-label="BMEVIAUAD02 - Mobil- és webes szoftverek laborfeladatok" data-md-component="logo">
      
  <img src="../../logo-bme-aut.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            BMEVIAUAD02 - Mobil- és webes szoftverek laborfeladatok
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Labor 05 - SQLite - Rajzoló alkalmazás
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="aut" data-md-color-primary="red" data-md-color-accent="red"  aria-label="Váltás sötét témára"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Váltás sötét témára" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
            </label>
          
        
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="red" data-md-color-accent=""  aria-label="Váltás világos témára"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Váltás világos témára" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Keresés" placeholder="Keresés" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Törlés" aria-label="Törlés" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Keresés inicializálása
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/viauad02/laborok" title="Főoldalra ugrás" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    viauad02/laborok
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Lapok" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        Tudnivalók
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../01-android-hello-world/" class="md-tabs__link md-tabs__link--active">
        Mobil Laborok
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../08-http/" class="md-tabs__link">
        Webes Laborok
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigáció" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="BMEVIAUAD02 - Mobil- és webes szoftverek laborfeladatok" class="md-nav__button md-logo" aria-label="BMEVIAUAD02 - Mobil- és webes szoftverek laborfeladatok" data-md-component="logo">
      
  <img src="../../logo-bme-aut.png" alt="logo">

    </a>
    BMEVIAUAD02 - Mobil- és webes szoftverek laborfeladatok
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/viauad02/laborok" title="Főoldalra ugrás" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    viauad02/laborok
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      
      
        <label class="md-nav__link" for="__nav_1" tabindex="0" aria-expanded="false">
          Tudnivalók
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tudnivalók" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Tudnivalók
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Tárgy ismertető
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tudnivalok/github/GitHub/" class="md-nav__link">
        Feladatok beadása (GitHub)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tudnivalok/github/GitHub-Actions/" class="md-nav__link">
        GitHub Actions ismertető
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tudnivalok/github/GitHub-credentials/" class="md-nav__link">
        Egyetemi laborokban: GitHub belépés
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tudnivalok/github/contributing/" class="md-nav__link">
        Hozzájárulás az anyaghoz
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
        <label class="md-nav__link" for="__nav_2" tabindex="0" aria-expanded="true">
          Mobil Laborok
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Mobil Laborok" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Mobil Laborok
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../01-android-hello-world/" class="md-nav__link">
        Labor 01 - Hello World
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../02-android-ui/" class="md-nav__link">
        Labor 02 - UI - Tömegközlekedési alkalmazás
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../03-android-ui-adv/" class="md-nav__link">
        Labor 03 - UI, LazyColumn - Kiadás és bevétel kezelő alkalmazás
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../04-android-ui-charts/" class="md-nav__link">
        Labor 04 - UI,HorizontalPager, Charts - HR alkalmazás
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Labor 05 - SQLite - Rajzoló alkalmazás
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Labor 05 - SQLite - Rajzoló alkalmazás
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Tartalomjegyzék">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tartalomjegyzék
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#bevezeto" class="md-nav__link">
    Bevezető
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#elokeszuletek" class="md-nav__link">
    Előkészületek
  </a>
  
    <nav class="md-nav" aria-label="Előkészületek">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#git-repository-letrehozasa-es-letoltese" class="md-nav__link">
    Git repository létrehozása és letöltése
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-projekt-elokeszitese" class="md-nav__link">
    A projekt előkészítése
  </a>
  
    <nav class="md-nav" aria-label="A projekt előkészítése">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-projekt-letrehozasa" class="md-nav__link">
    A projekt létrehozása
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#a-resource-ok-hozzaadasa" class="md-nav__link">
    A resource-ok hozzáadása
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-kezdo-kepernyo-letrehozasa-1-pont" class="md-nav__link">
    A kezdő képernyő létrehozása (1 pont)
  </a>
  
    <nav class="md-nav" aria-label="A kezdő képernyő létrehozása (1 pont)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#allo-layout-kikenyszeritese" class="md-nav__link">
    Álló layout kikényszerítése
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#appbar-ok-letrehozasa" class="md-nav__link">
    AppBar-ok létrehozása
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#a-drawingscreen-felulet" class="md-nav__link">
    A DrawingScreen felület
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-stilusvalaszto-megvalositasa-1-pont" class="md-nav__link">
    A stílusválasztó megvalósítása (1 pont)
  </a>
  
    <nav class="md-nav" aria-label="A stílusválasztó megvalósítása (1 pont)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#szukseges-fuggoseg-hozzaadasa" class="md-nav__link">
    Szükséges függőség hozzáadása
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#viewmodel-letrehozas" class="md-nav__link">
    ViewModel létrehozás
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stilusvalaszto" class="md-nav__link">
    Stílusválasztó
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-canvas-megvalositasa-1-pont" class="md-nav__link">
    A canvas megvalósítása (1 pont)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#perzisztencia-megvalositasa-sqlite-adatbazis-segitsegevel-1-pont" class="md-nav__link">
    Perzisztencia megvalósítása SQLite adatbázis segítségével (1 pont)
  </a>
  
    <nav class="md-nav" aria-label="Perzisztencia megvalósítása SQLite adatbázis segítségével (1 pont)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tablak-definialasa" class="md-nav__link">
    Táblák definiálása
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#a-segedosztaly-letrehozasa" class="md-nav__link">
    A segédosztály létrehozása
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#viewmodel-kiegeszitese" class="md-nav__link">
    ViewModel kiegészítése
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onallo-feladat-a-vaszon-torlese-1-pont" class="md-nav__link">
    Önállo feladat: A vászon törlése (1 pont)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#imsc-feladat-2-imsc-pont" class="md-nav__link">
    iMSc feladat (2 iMSc pont)
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../06-android-room/" class="md-nav__link">
        Labor 06 - Room - Bevásárló lista alkalmazás
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../07-android-network/" class="md-nav__link">
        Labor 07 - Retrofit - Időjárás alkalmazás
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" tabindex="0" aria-expanded="false">
          Webes Laborok
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Webes Laborok" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Webes Laborok
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../08-http/" class="md-nav__link">
        Labor 08 - HTTP, HTML
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../09-css/" class="md-nav__link">
        Labor 09 - CSS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../10-bootstrap/" class="md-nav__link">
        Labor 10 - Bootstrap
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../11-js/" class="md-nav__link">
        Labor 11 - JavaScript alapok
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../12-js-advanced/" class="md-nav__link">
        Labor 12 - Haladó JavaScript
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../13-jquery/" class="md-nav__link">
        Labor 13 - jQuery
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tartalomjegyzék">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tartalomjegyzék
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#bevezeto" class="md-nav__link">
    Bevezető
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#elokeszuletek" class="md-nav__link">
    Előkészületek
  </a>
  
    <nav class="md-nav" aria-label="Előkészületek">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#git-repository-letrehozasa-es-letoltese" class="md-nav__link">
    Git repository létrehozása és letöltése
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-projekt-elokeszitese" class="md-nav__link">
    A projekt előkészítése
  </a>
  
    <nav class="md-nav" aria-label="A projekt előkészítése">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-projekt-letrehozasa" class="md-nav__link">
    A projekt létrehozása
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#a-resource-ok-hozzaadasa" class="md-nav__link">
    A resource-ok hozzáadása
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-kezdo-kepernyo-letrehozasa-1-pont" class="md-nav__link">
    A kezdő képernyő létrehozása (1 pont)
  </a>
  
    <nav class="md-nav" aria-label="A kezdő képernyő létrehozása (1 pont)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#allo-layout-kikenyszeritese" class="md-nav__link">
    Álló layout kikényszerítése
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#appbar-ok-letrehozasa" class="md-nav__link">
    AppBar-ok létrehozása
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#a-drawingscreen-felulet" class="md-nav__link">
    A DrawingScreen felület
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-stilusvalaszto-megvalositasa-1-pont" class="md-nav__link">
    A stílusválasztó megvalósítása (1 pont)
  </a>
  
    <nav class="md-nav" aria-label="A stílusválasztó megvalósítása (1 pont)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#szukseges-fuggoseg-hozzaadasa" class="md-nav__link">
    Szükséges függőség hozzáadása
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#viewmodel-letrehozas" class="md-nav__link">
    ViewModel létrehozás
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stilusvalaszto" class="md-nav__link">
    Stílusválasztó
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-canvas-megvalositasa-1-pont" class="md-nav__link">
    A canvas megvalósítása (1 pont)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#perzisztencia-megvalositasa-sqlite-adatbazis-segitsegevel-1-pont" class="md-nav__link">
    Perzisztencia megvalósítása SQLite adatbázis segítségével (1 pont)
  </a>
  
    <nav class="md-nav" aria-label="Perzisztencia megvalósítása SQLite adatbázis segítségével (1 pont)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tablak-definialasa" class="md-nav__link">
    Táblák definiálása
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#a-segedosztaly-letrehozasa" class="md-nav__link">
    A segédosztály létrehozása
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#viewmodel-kiegeszitese" class="md-nav__link">
    ViewModel kiegészítése
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onallo-feladat-a-vaszon-torlese-1-pont" class="md-nav__link">
    Önállo feladat: A vászon törlése (1 pont)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#imsc-feladat-2-imsc-pont" class="md-nav__link">
    iMSc feladat (2 iMSc pont)
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  



<h1 id="labor-05-sqlite-rajzolo-alkalmazas">Labor 05 - SQLite - Rajzoló alkalmazás<a class="headerlink" href="#labor-05-sqlite-rajzolo-alkalmazas" title="Permanent link">&para;</a></h1>
<h2 id="bevezeto">Bevezető<a class="headerlink" href="#bevezeto" title="Permanent link">&para;</a></h2>
<p>A labor során egy egyszerű rajzoló alkalmazás elkészítése a feladat. Az alkalmazással egy vászonra lehet vonalakat vagy pontokat rajzolni, majd a rajzolt ábrát perzisztensen elmenteni, hogy az alkalmazás újraindítása után is visszatöltődjön.</p>
<p align="center">
<img src="./assets/main_screen.png" width="160">
<img src="./assets/color_selector.png" width="160">
<img src="./assets/style_selector.png" width="160">
<img src="./assets/clear_dialog.png" width="160">
</p>

<div class="admonition info">
<p class="admonition-title">Room könyvtár</p>
<p>A labor során meg fogunk ismerkedni az SQLite könyvtárral, mellyel egy lokális SQL adatbázisban tudunk adatokat perszisztensen tárolni. A modern Android alapú fejlesztéseknél már általában a Room-ot használják, mely az SQLite-ra építve biztosít egy könnyen használható ORM réteget az Android életciklusokkal kombinálva. Fontosnak tartottuk viszont, hogy könnyen érthető legyen az anyag, ezért most csak az SQLite-os megoldást fogjuk vizsgálni.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">IMSc</p>
<p>A laborfeladatok sikeres befejezése után az IMSc feladat-ot megoldva 2 IMSc pont szerezhető.</p>
</div>
<h2 id="elokeszuletek">Előkészületek<a class="headerlink" href="#elokeszuletek" title="Permanent link">&para;</a></h2>
<p>A feladatok megoldása során ne felejtsd el követni a <a href="../../tudnivalok/github/GitHub/">feladat beadás folyamatát</a>.</p>
<h3 id="git-repository-letrehozasa-es-letoltese">Git repository létrehozása és letöltése<a class="headerlink" href="#git-repository-letrehozasa-es-letoltese" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Moodle-ben keresd meg a laborhoz tartozó meghívó URL-jét és annak segítségével hozd létre a saját repository-dat.</p>
</li>
<li>
<p>Várd meg, míg elkészül a repository, majd checkout-old ki.</p>
<div class="admonition tip">
<p>Egyetemi laborokban, ha a checkout során nem kér a rendszer felhasználónevet és jelszót, és nem sikerül a checkout, akkor valószínűleg a gépen korábban megjegyzett felhasználónévvel próbálkozott a rendszer. Először töröld ki a mentett belépési adatokat (lásd <a href="../../tudnivalok/github/GitHub-credentials/">itt</a>), és próbáld újra.</p>
</div>
</li>
<li>
<p>Hozz létre egy új ágat <code>megoldas</code> néven, és ezen az ágon dolgozz.</p>
</li>
<li>
<p>A <code>neptun.txt</code> fájlba írd bele a Neptun kódodat. A fájlban semmi más ne szerepeljen, csak egyetlen sorban a Neptun kód 6 karaktere.</p>
</li>
</ol>
<h2 id="a-projekt-elokeszitese">A projekt előkészítése<a class="headerlink" href="#a-projekt-elokeszitese" title="Permanent link">&para;</a></h2>
<h3 id="a-projekt-letrehozasa">A projekt létrehozása<a class="headerlink" href="#a-projekt-letrehozasa" title="Permanent link">&para;</a></h3>
<p>Hozzunk létre egy <code>Simple Drawer</code> nevű projektet Android Studioban:</p>
<ol>
<li>Hozzunk létre egy új projektet, válasszuk az <em>Empty Activity</em> lehetőséget.</li>
<li>A projekt neve legyen <code>Simple Drawer</code>, a kezdő package <code>hu.bme.aut.android.simpledrawer</code>, a mentési hely pedig a kicheckoutolt repository-n belül az SimpleDrawer mappa.</li>
<li>Nyelvnek válasszuk a <em>Kotlin</em>-t.</li>
<li>A minimum API szint legyen API24: Android 7.0.</li>
<li>A <em>Build configuration language</em> Kotlin DSL legyen.</li>
</ol>
<div class="admonition danger">
<p class="admonition-title">FILE PATH</p>
<p>A projekt a repository-ban lévő SimpleDrawer könyvtárba kerüljön, és beadásnál legyen is felpusholva! A kód nélkül nem tudunk maximális pontot adni a laborra!</p>
</div>
<p>A labor során az alábbi technológiákkal fogunk találkozni:</p>
<ul>
<li>SQLite</li>
<li>Scaffold<ul>
<li>TopBar</li>
<li>BottomBar</li>
</ul>
</li>
<li>ViewModel</li>
<li>Dialog</li>
</ul>
<h3 id="a-resource-ok-hozzaadasa">A resource-ok hozzáadása<a class="headerlink" href="#a-resource-ok-hozzaadasa" title="Permanent link">&para;</a></h3>
<p>Először töltsük le <a href="downloads/res.zip">az alkalmazás képeit tartalmazó tömörített fájlt</a>, ami tartalmazza az összes képet, amire szükségünk lesz. A tartalmát másoljuk be az <code>app/src/main/res</code> mappába (ehhez segít, ha <em>Android Studio</em>-ban bal fent a szokásos <em>Android</em> nézetről a <em>Project</em> nézetre váltunk erre az időre).</p>
<p>Az alábbi, alkalmazáshoz szükséges <em>string resource</em>-okat másoljuk be a <code>res/values/strings.xml</code> fájlba:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;resources&gt;</span>
<span class="w">    </span><span class="nt">&lt;string</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;app_name&quot;</span><span class="nt">&gt;</span>Simple<span class="w"> </span>Drawer<span class="nt">&lt;/string&gt;</span>

<span class="w">    </span><span class="nt">&lt;string</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;style&quot;</span><span class="nt">&gt;</span>Stílus<span class="nt">&lt;/string&gt;</span>
<span class="w">    </span><span class="nt">&lt;string</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;line&quot;</span><span class="nt">&gt;</span>Vonal<span class="nt">&lt;/string&gt;</span>
<span class="w">    </span><span class="nt">&lt;string</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;point&quot;</span><span class="nt">&gt;</span>Pont<span class="nt">&lt;/string&gt;</span>

<span class="w">    </span><span class="nt">&lt;string</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;color&quot;</span><span class="nt">&gt;</span>Szín<span class="nt">&lt;/string&gt;</span>
<span class="w">    </span><span class="nt">&lt;string</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;red&quot;</span><span class="nt">&gt;</span>Piros<span class="nt">&lt;/string&gt;</span>
<span class="w">    </span><span class="nt">&lt;string</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;green&quot;</span><span class="nt">&gt;</span>Zöld<span class="nt">&lt;/string&gt;</span>
<span class="w">    </span><span class="nt">&lt;string</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;blue&quot;</span><span class="nt">&gt;</span>Kék<span class="nt">&lt;/string&gt;</span>

<span class="w">    </span><span class="nt">&lt;string</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;clear&quot;</span><span class="nt">&gt;</span>Törlés<span class="nt">&lt;/string&gt;</span>

<span class="w">    </span><span class="nt">&lt;string</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;are_you_sure_want_to_clear&quot;</span><span class="nt">&gt;</span>Biztosan<span class="w"> </span>törölni<span class="w"> </span>akarod<span class="w"> </span>a<span class="w"> </span>rajzlapot?<span class="nt">&lt;/string&gt;</span>
<span class="w">    </span><span class="nt">&lt;string</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ok&quot;</span><span class="nt">&gt;</span>OK<span class="nt">&lt;/string&gt;</span>
<span class="w">    </span><span class="nt">&lt;string</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;cancel&quot;</span><span class="nt">&gt;</span>Mégse<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;/resources&gt;</span>
</code></pre></div>
<h2 id="a-kezdo-kepernyo-letrehozasa-1-pont">A kezdő képernyő létrehozása (1 pont)<a class="headerlink" href="#a-kezdo-kepernyo-letrehozasa-1-pont" title="Permanent link">&para;</a></h2>
<h3 id="allo-layout-kikenyszeritese">Álló layout kikényszerítése<a class="headerlink" href="#allo-layout-kikenyszeritese" title="Permanent link">&para;</a></h3>
<p>Az alkalmazásunkban az egyszerűség kedvéért most csak az álló módot támogatjuk. Ehhez az <code>AndroidManifest.xml</code>-ben az <code>&lt;activity&gt;</code> tagen belül módosítsuk az alábbiakat:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;activity</span>
<span class="w">    </span><span class="na">android:name=</span><span class="s">&quot;.MainActivity&quot;</span>
<span class="w">    </span><span class="na">android:exported=</span><span class="s">&quot;true&quot;</span>
<span class="w">    </span><span class="na">android:label=</span><span class="s">&quot;@string/app_name&quot;</span>
<span class="w">    </span><span class="na">android:screenOrientation=</span><span class="s">&quot;sensorPortrait&quot;</span>
<span class="w">    </span><span class="na">android:theme=</span><span class="s">&quot;@style/Theme.SimpleDrawer&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;intent-filter&gt;</span>
<span class="w">        </span><span class="nt">&lt;action</span><span class="w"> </span><span class="na">android:name=</span><span class="s">&quot;android.intent.action.MAIN&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>

<span class="w">        </span><span class="nt">&lt;category</span><span class="w"> </span><span class="na">android:name=</span><span class="s">&quot;android.intent.category.LAUNCHER&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/intent-filter&gt;</span>
<span class="nt">&lt;/activity&gt;</span>
</code></pre></div>
<h3 id="appbar-ok-letrehozasa">AppBar-ok létrehozása<a class="headerlink" href="#appbar-ok-letrehozasa" title="Permanent link">&para;</a></h3>
<p>A már létező <code>ui</code> <em>package</em>-en belül hozzunk létre egy <code>view</code> <em>package</em>-et, ezen belül egy <code>TopBar</code> és egy <code>BottomBar</code> <em>Kotlin File</em>-t, majd írjuk bele a következőt:</p>
<p><code>TopBar.kt</code>:</p>
<p><div class="highlight"><pre><span></span><code><span class="k">package</span><span class="w"> </span><span class="nn">hu.bme.aut.android.simpledrawer.ui.view</span>

<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.material3.ExperimentalMaterial3Api</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.material3.Text</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.material3.TopAppBar</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.material3.TopAppBarDefaults</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.runtime.Composable</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.ui.graphics.Color</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.ui.res.stringResource</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.ui.tooling.preview.Preview</span>
<span class="k">import</span><span class="w"> </span><span class="nn">hu.bme.aut.android.simpledrawer.R</span>

<span class="nd">@OptIn</span><span class="p">(</span><span class="n">ExperimentalMaterial3Api</span><span class="o">::</span><span class="n">class</span><span class="p">)</span>
<span class="nd">@Composable</span>
<span class="kd">fun</span><span class="w"> </span><span class="nf">TopBar</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">TopAppBar</span><span class="p">(</span>
<span class="w">        </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">Text</span><span class="p">(</span>
<span class="w">                </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stringResource</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">R</span><span class="p">.</span><span class="na">string</span><span class="p">.</span><span class="na">app_name</span><span class="p">),</span>
<span class="w">                </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Color</span><span class="p">.</span><span class="na">White</span>
<span class="w">            </span><span class="p">)</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="n">colors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TopAppBarDefaults</span><span class="p">.</span><span class="na">topAppBarColors</span><span class="p">(</span><span class="n">containerColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Color</span><span class="p">(</span><span class="m">0</span><span class="n">xFF6200EE</span><span class="p">))</span>
<span class="w">    </span><span class="p">)</span>
<span class="p">}</span>

<span class="nd">@Composable</span>
<span class="nd">@Preview</span>
<span class="kd">fun</span><span class="w"> </span><span class="nf">PreviewTopBar</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">TopBar</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div>
Ez csak egy egyszerű TopBar aminek a tetejére kiírhatjuk az alkalmazás nevét. A BottomBar kicsit összetettebb lesz ennél.</p>
<p><code>BottomBar.kt</code>:</p>
<div class="highlight"><pre><span></span><code><span class="k">package</span><span class="w"> </span><span class="nn">hu.bme.aut.android.simpledrawer.ui.view</span>

<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.foundation.layout.Arrangement</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.foundation.layout.Row</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.foundation.layout.fillMaxSize</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.foundation.layout.height</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.foundation.layout.size</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.material3.BottomAppBar</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.material3.Icon</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.material3.IconButton</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.runtime.Composable</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.ui.Alignment</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.ui.Modifier</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.ui.graphics.Color</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.ui.res.painterResource</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.ui.res.stringResource</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.ui.tooling.preview.Preview</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.ui.unit.dp</span>
<span class="k">import</span><span class="w"> </span><span class="nn">hu.bme.aut.android.simpledrawer.R</span>

<span class="nd">@Composable</span>
<span class="kd">fun</span><span class="w"> </span><span class="nf">BottomBar</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">BottomAppBar</span><span class="p">(</span>
<span class="w">        </span><span class="n">actions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">Row</span><span class="p">(</span>
<span class="w">                </span><span class="n">modifier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Modifier</span>
<span class="w">                    </span><span class="p">.</span><span class="na">fillMaxSize</span><span class="p">(),</span>
<span class="w">                </span><span class="n">horizontalArrangement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Arrangement</span><span class="p">.</span><span class="na">End</span><span class="p">,</span>
<span class="w">                </span><span class="n">verticalAlignment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Alignment</span><span class="p">.</span><span class="na">CenterVertically</span>
<span class="w">            </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">IconButton</span><span class="p">(</span>
<span class="w">                    </span><span class="n">onClick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/*TODO*/</span><span class="w"> </span><span class="p">},</span>
<span class="w">                    </span><span class="n">modifier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Modifier</span><span class="p">.</span><span class="na">size</span><span class="p">(</span><span class="m">64.</span><span class="n">dp</span><span class="p">)</span>
<span class="w">                </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="n">Icon</span><span class="p">(</span>
<span class="w">                        </span><span class="n">painterResource</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">R</span><span class="p">.</span><span class="na">drawable</span><span class="p">.</span><span class="na">ic_style</span><span class="p">),</span>
<span class="w">                        </span><span class="n">contentDescription</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stringResource</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">R</span><span class="p">.</span><span class="na">string</span><span class="p">.</span><span class="na">style</span><span class="p">)</span>
<span class="w">                    </span><span class="p">)</span>
<span class="w">                    </span><span class="c1">//Stílusok</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="n">containerColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Color</span><span class="p">(</span><span class="m">0</span><span class="n">xFF6200EE</span><span class="p">),</span>
<span class="w">    </span><span class="p">)</span>
<span class="p">}</span>

<span class="nd">@Composable</span>
<span class="nd">@Preview</span>
<span class="kd">fun</span><span class="w"> </span><span class="nf">PreviewBottomBar</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">BottomBar</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div>
<p>A BottomBar már kicsit összetettebb, itt az <code>actions</code> paraméterrel át tudunk adni olyan composable elemeket, amik megjelennek majd kis iconként az AppBar-on, ezekhez később akár onClick eseményt is tudunk adni. Így fogjuk megvalósítani a stílusváltás opciót, amelynek a megnyomására egy ablak ugrik fel, amin ki lehet választani a kívánt stílust (Vonal, pont)</p>
<h3 id="a-drawingscreen-felulet">A DrawingScreen felület<a class="headerlink" href="#a-drawingscreen-felulet" title="Permanent link">&para;</a></h3>
<p>A <code>ui</code> <em>package</em>-en belül hozzunk létre egy <code>screen</code> <em>package</em>-t. Ebbe fog kerülni a <code>DrawingScreen</code>-ünk. Itt fogjuk elhelyezni a <em>Scaffold</em>-ot, aminek a segítségével egy TopBar-t és egy BottomBar-t is megvalósítunk. Kezdetben a Scaffold tartalma csak egy fekete <code>Spacer</code> lesz, ezt később a <code>Canvas</code> fogja helyettesíteni.</p>
<div class="highlight"><pre><span></span><code><span class="k">package</span><span class="w"> </span><span class="nn">hu.bme.aut.android.simpledrawer.ui.screen</span>

<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.foundation.background</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.foundation.layout.Spacer</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.foundation.layout.fillMaxSize</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.foundation.layout.padding</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.material3.Scaffold</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.runtime.Composable</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.ui.Modifier</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.ui.graphics.Color</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.ui.tooling.preview.Preview</span>
<span class="k">import</span><span class="w"> </span><span class="nn">hu.bme.aut.android.simpledrawer.ui.view.BottomBar</span>
<span class="k">import</span><span class="w"> </span><span class="nn">hu.bme.aut.android.simpledrawer.ui.view.TopBar</span>

<span class="nd">@Composable</span>
<span class="kd">fun</span><span class="w"> </span><span class="nf">DrawingScreen</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="n">Scaffold</span><span class="p">(</span>
<span class="w">        </span><span class="n">topBar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">TopBar</span><span class="p">()</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="n">bottomBar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">BottomBar</span><span class="p">()</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">innerPadding</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">        </span><span class="c1">//TODO replace with canvas</span>
<span class="w">        </span><span class="n">Spacer</span><span class="p">(</span>
<span class="w">            </span><span class="n">modifier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Modifier</span>
<span class="w">                </span><span class="p">.</span><span class="na">background</span><span class="p">(</span><span class="n">Color</span><span class="p">.</span><span class="na">Black</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">padding</span><span class="p">(</span><span class="n">innerPadding</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">fillMaxSize</span><span class="p">()</span>
<span class="w">        </span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="nd">@Composable</span>
<span class="nd">@Preview</span>
<span class="kd">fun</span><span class="w"> </span><span class="nf">PreviewDrawingScreen</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">DrawingScreen</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div>
<p>Végül írjuk át a <code>MainActivity.kt</code> kódját, úgy hogy az imént létrehozott <code>DrawingScreent</code> példányosítsa:</p>
<div class="highlight"><pre><span></span><code><span class="k">package</span><span class="w"> </span><span class="nn">hu.bme.aut.android.simpledrawer</span>

<span class="k">import</span><span class="w"> </span><span class="nn">android.os.Bundle</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.activity.ComponentActivity</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.activity.compose.setContent</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.activity.enableEdgeToEdge</span>
<span class="k">import</span><span class="w"> </span><span class="nn">hu.bme.aut.android.simpledrawer.ui.screen.DrawingScreen</span>
<span class="k">import</span><span class="w"> </span><span class="nn">hu.bme.aut.android.simpledrawer.ui.theme.SimpleDrawerTheme</span>

<span class="kd">class</span><span class="w"> </span><span class="nc">MainActivity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ComponentActivity</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">:</span><span class="w"> </span><span class="n">Bundle?)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">super</span><span class="p">.</span><span class="na">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">)</span>
<span class="w">        </span><span class="n">enableEdgeToEdge</span><span class="p">()</span>
<span class="w">        </span><span class="n">setContent</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">SimpleDrawerTheme</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">DrawingScreen</span><span class="p">()</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Hogy ha ezzel is megvagyunk indítsuk el az alkalmazást! Most már látjuk a két AppBar-t illetve a közötte elhelyezkedő fekete képernyőt. A BottomBar-on feltűnik egy icon is, aminek a megnyomása még semmit nem csinál.</p>
<div class="admonition example">
<p class="admonition-title">BEADANDÓ (1 pont)</p>
<p>Készíts egy <strong>képernyőképet</strong>, amelyen látszik az <strong>elkészült kezdőképernyő</strong> (emulátoron, készüléket tükrözve vagy képernyőfelvétellel), egy <strong>ahhoz tartozó kódrészlet</strong>, valamint a <strong>neptun kódod a kódban valahol kommentként</strong>' A képet a megoldásban a repository-ba f1.png néven töltsd föl!</p>
<p>A képernyőkép szükséges feltétele a pontszám megszerzésének.</p>
</div>
<h2 id="a-stilusvalaszto-megvalositasa-1-pont">A stílusválasztó megvalósítása (1 pont)<a class="headerlink" href="#a-stilusvalaszto-megvalositasa-1-pont" title="Permanent link">&para;</a></h2>
<p>Most, hogy már létre van hozva a BottomBar, illetve a kezdőképernyő váza, valósítsuk meg a stílus választást is. Ehhez módosítanunk kell a <code>BottomBar</code>-t, úgy, hogy ha a Stílus választó gombra kattintunk, akkor megjelenjen egy menü, amin ki lehet választani a rajzmódot. Ez a mód a rajzolás egy állapotaként valósítható meg. Ezeket az állapotokat pedig a korábbi laborokon látottak szerint egy külön <em>viewModel</em>-ben tároljuk. </p>
<h3 id="szukseges-fuggoseg-hozzaadasa">Szükséges függőség hozzáadása<a class="headerlink" href="#szukseges-fuggoseg-hozzaadasa" title="Permanent link">&para;</a></h3>
<p>A <em>viewModel</em> használatához fel kell vennünk egy függőséget a <code>build.gradle.kts</code> fájlba. Ehhez nyissuk meg a <code>libs.versions.toml</code> fájlt a <code>gradle</code> <em>package</em>-ben, majd írjuk bele a következőt:</p>
<p><div class="highlight"><pre><span></span><code><span class="k">[versions]</span>
<span class="p">...</span>
<span class="n">lifecycleCompose</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;2.8.6&quot;</span>

<span class="k">[libraries]</span>
<span class="p">...</span>
<span class="n">androidx-lifecycle-compose</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">group</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;androidx.lifecycle&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;lifecycle-viewmodel-compose&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">version</span><span class="p">.</span><span class="n">ref</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;lifecycleCompose&quot;</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
Ezután frissítsük a <code>build.gradle.kts</code>-t is:
<div class="highlight"><pre><span></span><code>dependencies{
    ...
    implementation(libs.androidx.lifecycle.compose)
}
</code></pre></div></p>
<p>A függőség felvétele után ne felejtsünk el rányomni a <code>Sync Now</code> gombra.</p>
<h3 id="viewmodel-letrehozas">ViewModel létrehozás<a class="headerlink" href="#viewmodel-letrehozas" title="Permanent link">&para;</a></h3>
<p>Hozzuk tehát a <em>viewModel</em>-ünket. Ez segítésget fog nyújtani a szín/stílus váltásban, és később a perzisztens adattárolásban.</p>
<p>Hozzunk létre a <code>screen</code> <em>package</em>-be a <code>DrawingScreen</code> mellé egy <code>DrawingViewModel</code> <em>Kotlin Filet</em> majd írjuk bele a következő kódot:</p>
<div class="highlight"><pre><span></span><code><span class="k">package</span><span class="w"> </span><span class="nn">hu.bme.aut.android.simpledrawer.ui.screen</span>

<span class="k">import</span><span class="w"> </span><span class="nn">android.app.Application</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.lifecycle.AndroidViewModel</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.lifecycle.viewModelScope</span>
<span class="k">import</span><span class="w"> </span><span class="nn">kotlinx.coroutines.flow.MutableStateFlow</span>
<span class="k">import</span><span class="w"> </span><span class="nn">kotlinx.coroutines.flow.StateFlow</span>
<span class="k">import</span><span class="w"> </span><span class="nn">kotlinx.coroutines.launch</span>

<span class="kd">class</span><span class="w"> </span><span class="nc">DrawingViewModel</span><span class="p">(</span><span class="n">application</span><span class="p">:</span><span class="w"> </span><span class="n">Application</span><span class="p">):</span><span class="w"> </span><span class="n">AndroidViewModel</span><span class="p">(</span><span class="n">application</span><span class="p">){</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">_drawingMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MutableStateFlow</span><span class="p">(</span><span class="n">DrawingMode</span><span class="p">.</span><span class="na">LINE</span><span class="p">)</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">drawingMode</span><span class="p">:</span><span class="w"> </span><span class="n">StateFlow</span><span class="o">&lt;</span><span class="n">DrawingMode</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_drawingMode</span>


<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">_drawElements</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MutableStateFlow</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">Any</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="n">emptyList</span><span class="p">())</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">drawElements</span><span class="p">:</span><span class="w"> </span><span class="n">StateFlow</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">Any</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_drawElements</span>


<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">setDrawingMode</span><span class="p">(</span><span class="n">mode</span><span class="p">:</span><span class="w"> </span><span class="n">DrawingMode</span><span class="p">){</span>
<span class="w">        </span><span class="n">viewModelScope</span><span class="p">.</span><span class="na">launch</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">_drawingMode</span><span class="p">.</span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mode</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">addDrawElement</span><span class="p">(</span><span class="n">element</span><span class="p">:</span><span class="w"> </span><span class="kt">Any</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">viewModelScope</span><span class="p">.</span><span class="na">launch</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">_drawElements</span><span class="p">.</span><span class="na">value</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">element</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">enum</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">DrawingMode</span><span class="p">{</span>
<span class="w">    </span><span class="n">LINE</span><span class="p">,</span>
<span class="w">    </span><span class="n">POINT</span>
<span class="p">}</span>
</code></pre></div>
<p>Az viewModel-hez szükségünk van még egy osztályra a <code>DrawingMode</code>-ra. Ezzel tudjuk majd állítani a rajz stílust.</p>
<div class="admonition warning">
<p class="admonition-title">Kód értelmezése</p>
<p>A laborvezető segítségével értelmezzük a viewModel kódját!</p>
</div>
<p>Most, hogy megvan a <em>viewModel</em>-ünk, már csak a <code>BottomBar</code>-t kell módosítani, hogy be tudjuk állítani az állapotot.</p>
<h3 id="stilusvalaszto">Stílusválasztó<a class="headerlink" href="#stilusvalaszto" title="Permanent link">&para;</a></h3>
<p>Módosítsuk a <code>BottomBar</code>-t, úgy, hogy ha a Stílus választó gombra kattintunk, akkor megjelenjen egy ablak, amin ki lehet választani a rajzmódot. Ezt a következő képpen tehetjük meg:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Composable</span>
<span class="kd">fun</span><span class="w"> </span><span class="nf">BottomBar</span><span class="p">(</span>
<span class="w">    </span><span class="n">viewModel</span><span class="p">:</span><span class="w"> </span><span class="n">DrawingViewModel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">viewModel</span><span class="p">()</span>
<span class="p">){</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nv">showStyle</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">remember</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">mutableStateOf</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">drawingMode</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">viewModel</span><span class="p">.</span><span class="na">drawingMode</span><span class="p">.</span><span class="na">collectAsState</span><span class="p">()</span>

<span class="w">    </span><span class="n">BottomAppBar</span><span class="p">(</span>
<span class="w">        </span><span class="p">...</span>
<span class="w">        </span><span class="n">actions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">Row</span><span class="w"> </span><span class="p">(</span>
<span class="w">                </span><span class="p">...</span>
<span class="w">            </span><span class="p">){</span>
<span class="w">                </span><span class="n">IconButton</span><span class="p">(</span>
<span class="w">                    </span><span class="n">onClick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">showStyle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="n">showStyle</span><span class="w"> </span><span class="p">},</span>
<span class="w">                    </span><span class="n">modifier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Modifier</span><span class="p">.</span><span class="na">size</span><span class="p">(</span><span class="m">64.</span><span class="n">dp</span><span class="p">)</span>
<span class="w">                </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="n">Icon</span><span class="p">(</span>
<span class="w">                        </span><span class="n">painterResource</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">R</span><span class="p">.</span><span class="na">drawable</span><span class="p">.</span><span class="na">ic_style</span><span class="p">),</span>
<span class="w">                        </span><span class="n">contentDescription</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stringResource</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">R</span><span class="p">.</span><span class="na">string</span><span class="p">.</span><span class="na">style</span><span class="p">)</span>
<span class="w">                    </span><span class="p">)</span>
<span class="w">                    </span><span class="n">DropdownMenu</span><span class="p">(</span>
<span class="w">                        </span><span class="n">expanded</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">showStyle</span><span class="p">,</span>
<span class="w">                        </span><span class="n">onDismissRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">showStyle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="n">DropdownMenuItem</span><span class="p">(</span>
<span class="w">                            </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Text</span><span class="p">(</span>
<span class="w">                                </span><span class="n">stringResource</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">R</span><span class="p">.</span><span class="na">string</span><span class="p">.</span><span class="na">point</span><span class="p">),</span>
<span class="w">                                </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">drawingMode</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">DrawingMode</span><span class="p">.</span><span class="na">POINT</span><span class="p">)</span><span class="w"> </span><span class="n">Color</span><span class="p">.</span><span class="na">Magenta</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">Color</span><span class="p">.</span><span class="na">Black</span>
<span class="w">                            </span><span class="p">)</span><span class="w"> </span><span class="p">},</span>
<span class="w">                            </span><span class="n">onClick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">                                </span><span class="n">viewModel</span><span class="p">.</span><span class="na">setDrawingMode</span><span class="p">(</span><span class="n">DrawingMode</span><span class="p">.</span><span class="na">POINT</span><span class="p">)</span>
<span class="w">                                </span><span class="n">showStyle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
<span class="w">                            </span><span class="p">}</span>
<span class="w">                        </span><span class="p">)</span>
<span class="w">                        </span><span class="n">DropdownMenuItem</span><span class="p">(</span>
<span class="w">                            </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Text</span><span class="p">(</span>
<span class="w">                                </span><span class="n">stringResource</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">R</span><span class="p">.</span><span class="na">string</span><span class="p">.</span><span class="na">line</span><span class="p">),</span>
<span class="w">                                </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">drawingMode</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">DrawingMode</span><span class="p">.</span><span class="na">LINE</span><span class="p">)</span><span class="w"> </span><span class="n">Color</span><span class="p">.</span><span class="na">Magenta</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">Color</span><span class="p">.</span><span class="na">Black</span><span class="p">)</span>
<span class="w">                            </span><span class="p">},</span>
<span class="w">                            </span><span class="n">onClick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">                                </span><span class="n">viewModel</span><span class="p">.</span><span class="na">setDrawingMode</span><span class="p">(</span><span class="n">DrawingMode</span><span class="p">.</span><span class="na">LINE</span><span class="p">)</span>
<span class="w">                                </span><span class="n">showStyle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
<span class="w">                            </span><span class="p">}</span>
<span class="w">                        </span><span class="p">)</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">                </span><span class="p">...</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">...</span>
<span class="w">    </span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">viewModel</p>
<p>Sokszor az Android Studio nem tudja megtalálni a <code>viewModel()</code>-hez szükséges importot. Ilyenkor kézileg írjuk az importokhoz az alábbi importot:
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nn">androidx.lifecycle.viewmodel.compose.viewModel</span>
</code></pre></div></p>
</div>
<p>Ezután módosítsuk a <code>DrawingScreen</code>-en a <code>BottomBar</code> függvény hívást, és vegyük hozzá a viewModel paramétert.</p>
<div class="highlight"><pre><span></span><code><span class="k">package</span><span class="w"> </span><span class="nn">hu.bme.aut.android.simpledrawer.ui.screen</span>

<span class="k">import</span><span class="w"> </span><span class="nn">android.app.Application</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.foundation.background</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.foundation.layout.Spacer</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.foundation.layout.fillMaxSize</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.foundation.layout.padding</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.material3.Scaffold</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.runtime.Composable</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.ui.Modifier</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.ui.graphics.Color</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.ui.platform.LocalContext</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.ui.tooling.preview.Preview</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.lifecycle.ViewModelProvider</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.lifecycle.viewmodel.compose.viewModel</span>
<span class="k">import</span><span class="w"> </span><span class="nn">hu.bme.aut.android.simpledrawer.ui.view.BottomBar</span>
<span class="k">import</span><span class="w"> </span><span class="nn">hu.bme.aut.android.simpledrawer.ui.view.TopBar</span>

<span class="nd">@Composable</span>
<span class="kd">fun</span><span class="w"> </span><span class="nf">DrawingScreen</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">viewModel</span><span class="p">:</span><span class="w"> </span><span class="n">DrawingViewModel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">viewModel</span><span class="p">(</span>
<span class="w">        </span><span class="n">factory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ViewModelProvider</span><span class="p">.</span><span class="na">AndroidViewModelFactory</span><span class="p">(</span>
<span class="w">            </span><span class="n">LocalContext</span><span class="p">.</span><span class="na">current</span><span class="p">.</span><span class="na">applicationContext</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">Application</span>
<span class="w">        </span><span class="p">)</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">    </span><span class="n">Scaffold</span><span class="p">(</span>
<span class="w">        </span><span class="n">topBar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">TopBar</span><span class="p">()</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="n">bottomBar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">BottomBar</span><span class="p">(</span><span class="n">viewModel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">viewModel</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">innerPadding</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">        </span><span class="c1">//TODO replace with canvas</span>
<span class="w">        </span><span class="n">Spacer</span><span class="p">(</span>
<span class="w">            </span><span class="n">modifier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Modifier</span>
<span class="w">                </span><span class="p">.</span><span class="na">background</span><span class="p">(</span><span class="n">Color</span><span class="p">.</span><span class="na">Black</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">padding</span><span class="p">(</span><span class="n">innerPadding</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">fillMaxSize</span><span class="p">()</span>
<span class="w">        </span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="nd">@Composable</span>
<span class="nd">@Preview</span>
<span class="kd">fun</span><span class="w"> </span><span class="nf">PreviewDrawingScreen</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">DrawingScreen</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div>
<div class="admonition example">
<p class="admonition-title">BEADANDÓ (1 pont)</p>
<p>Készíts egy <strong>képernyőképet</strong>, amelyen látszik az <strong>elkészült Stílusválasztó kinyitva</strong> (emulátoron, készüléket tükrözve vagy képernyőfelvétellel), egy <strong>ahhoz tartozó kódrészlet</strong>, valamint a <strong>neptun kódod a kódban valahol kommentként</strong>! A képet a megoldásban a repository-ba f2.png néven töltsd föl!</p>
<p>A képernyőkép szükséges feltétele a pontszám megszerzésének.</p>
</div>
<h2 id="a-canvas-megvalositasa-1-pont">A canvas megvalósítása (1 pont)<a class="headerlink" href="#a-canvas-megvalositasa-1-pont" title="Permanent link">&para;</a></h2>
<p>A rajzolás folyamán pontokat és vonalakat szeretnénk rajzolni. Ezek kezeléséhez hozzunk létre két data class-t <code>Line</code> és <code>Point</code> néven. Hozzunk létre egy <code>model</code> <em>package</em>-et a fő <em>package</em>-ünkben, majd implementáljuk a két osztályt:</p>
<p><code>Point.kt</code>:</p>
<div class="highlight"><pre><span></span><code><span class="k">package</span><span class="w"> </span><span class="nn">hu.bme.aut.android.simpledrawer.model</span>

<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.ui.graphics.Color</span>

<span class="kd">data</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">Point</span><span class="p">(</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nv">x</span><span class="p">:</span><span class="w"> </span><span class="kt">Float</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0F</span><span class="p">,</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nv">y</span><span class="p">:</span><span class="w"> </span><span class="kt">Float</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0F</span><span class="p">,</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nv">color</span><span class="p">:</span><span class="w"> </span><span class="n">Color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Color</span><span class="p">.</span><span class="na">Yellow</span>
<span class="p">)</span>
</code></pre></div>
<p><code>Line.kt</code>:</p>
<div class="highlight"><pre><span></span><code><span class="k">package</span><span class="w"> </span><span class="nn">hu.bme.aut.android.simpledrawer.model</span>

<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.ui.graphics.Color</span>

<span class="kd">data</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">Line</span><span class="p">(</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nv">start</span><span class="p">:</span><span class="w"> </span><span class="n">Point</span><span class="p">,</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nv">end</span><span class="p">:</span><span class="w"> </span><span class="n">Point</span><span class="p">,</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nv">color</span><span class="p">:</span><span class="w"> </span><span class="n">Color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Color</span><span class="p">.</span><span class="na">Yellow</span>
<span class="p">)</span>
</code></pre></div>
<p>Ilyen formában fogjuk tárolni az adatunkat a listában. Igaz, hogy a <code>Line</code> data class még kétszer megkapja a színt, de ez csak az egyszerűség kedvéért lesz így, ezzel a paraméterrel nem fogunk foglalkozni.</p>
<p>Ezután a <code>view</code> <em>package</em>-en belül hozzunk létre egy <code>DrawingCanvas</code> <em>Kotlin File-t</em>. Ebben a Composable osztályban a beépített <code>Canvas</code> <em>Composable</em> segítségével fogjuk a rajzolást megvalósítani. Ennek az osztálynak van egy <code>Modifier.pointerInteropFilter</code> paramétere, aminek a segítségével fogjuk a gesztusokat lekezelni.</p>
<div class="highlight"><pre><span></span><code><span class="k">package</span><span class="w"> </span><span class="nn">hu.bme.aut.android.simpledrawer.ui.view</span>

<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.foundation.Canvas</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.foundation.background</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.runtime.Composable</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.runtime.getValue</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.runtime.mutableStateOf</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.runtime.remember</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.runtime.setValue</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.ui.ExperimentalComposeUiApi</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.ui.Modifier</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.ui.geometry.Offset</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.ui.graphics.Color</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.compose.ui.input.pointer.pointerInteropFilter</span>
<span class="k">import</span><span class="w"> </span><span class="nn">hu.bme.aut.android.simpledrawer.ui.screen.DrawingMode</span>
<span class="k">import</span><span class="w"> </span><span class="nn">hu.bme.aut.android.simpledrawer.ui.screen.DrawingViewModel</span>

<span class="nd">@OptIn</span><span class="p">(</span><span class="n">ExperimentalComposeUiApi</span><span class="o">::</span><span class="n">class</span><span class="p">)</span>
<span class="nd">@Composable</span>
<span class="kd">fun</span><span class="w"> </span><span class="nf">DrawingCanvas</span><span class="p">(</span>
<span class="w">    </span><span class="n">modifier</span><span class="p">:</span><span class="w"> </span><span class="n">Modifier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Modifier</span><span class="p">,</span>
<span class="w">    </span><span class="n">currentColor</span><span class="p">:</span><span class="w"> </span><span class="n">Color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Color</span><span class="p">.</span><span class="na">Red</span><span class="p">,</span>
<span class="w">    </span><span class="n">drawingMode</span><span class="p">:</span><span class="w"> </span><span class="n">DrawingMode</span><span class="p">,</span>
<span class="w">    </span><span class="n">viewModel</span><span class="p">:</span><span class="w"> </span><span class="n">DrawingViewModel</span><span class="p">,</span>
<span class="w">    </span><span class="n">drawElements</span><span class="p">:</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="kt">Any</span><span class="o">&gt;</span>
<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nv">startPoint</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">remember</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">mutableStateOf</span><span class="o">&lt;</span><span class="n">Offset?&gt;</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nv">endPoint</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">remember</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">mutableStateOf</span><span class="o">&lt;</span><span class="n">Offset?&gt;</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nv">tempPoint</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">remember</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">mutableStateOf</span><span class="o">&lt;</span><span class="n">Offset?&gt;</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>

<span class="w">    </span><span class="n">Canvas</span><span class="p">(</span>
<span class="w">        </span><span class="n">modifier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">modifier</span>
<span class="w">            </span><span class="p">.</span><span class="na">background</span><span class="p">(</span><span class="n">Color</span><span class="p">.</span><span class="na">Black</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">pointerInteropFilter</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">event</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">                </span><span class="k">when</span><span class="w"> </span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="na">action</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="cm">/*TODO*/</span>
<span class="w">                    </span><span class="c1">//ACTION_DOWN</span>

<span class="w">                    </span><span class="c1">//ACTION_MOVE</span>

<span class="w">                    </span><span class="c1">//ACTION_UP</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">                </span><span class="kc">true</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="c1">//TODO drawElements</span>

<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Az <code>event.action</code>-ön belül kezelni fogjuk a <code>MotionEvent.ACTION_DOWN</code>, <code>MotionEvent.ACTION_MOVE</code>, <code>MotionEvent.ACTION_UP</code> eventeket, valamint a <code>Canvas</code>-re rajzolást is.</p>
<p><code>ACTION_DOWN</code>:</p>
<p><div class="highlight"><pre><span></span><code><span class="n">MotionEvent</span><span class="p">.</span><span class="na">ACTION_DOWN</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">startPoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Offset</span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="na">x</span><span class="p">,</span><span class="w"> </span><span class="n">event</span><span class="p">.</span><span class="na">y</span><span class="p">)</span>
<span class="w">    </span><span class="n">tempPoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">startPoint</span>
<span class="p">}</span>
</code></pre></div>
Ez az esemény akkor következik be, amikor az ujjunkat a képernyőre ráhelyezzük. Ilyenkor elmentjük ezt a paramétert, egy <code>startPoint</code> váltózóba.</p>
<p><code>ACTION_MOVE</code>:</p>
<p><div class="highlight"><pre><span></span><code><span class="n">MotionEvent</span><span class="p">.</span><span class="na">ACTION_MOVE</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">tempPoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Offset</span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="na">x</span><span class="p">,</span><span class="w"> </span><span class="n">event</span><span class="p">.</span><span class="na">y</span><span class="p">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">drawingMode</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">DrawingMode</span><span class="p">.</span><span class="na">LINE</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">endPoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tempPoint</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
Miután lehelyezük az ujjunkat, tudjuk mozgatni is. Ilyenkor következik be ez az esemény. Itt két részre bontódik a folyamat, ugyanis, hogy ha pont-ot rajzolunk és mozgatjuk az ujjunkat, akkor a pontot az utolsó pozícióra szeretnénk helyezni, így a <code>tempPoint</code>-ba írjuk bele a pozíciót. Hogy ha vonalat rajzolunk, akkor az <code>endPoint</code>-ba kell beleírnunk a pozíciót.</p>
<p><code>ACTION_UP</code>:</p>
<div class="highlight"><pre><span></span><code><span class="n">MotionEvent</span><span class="p">.</span><span class="na">ACTION_UP</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">drawingMode</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">DrawingMode</span><span class="p">.</span><span class="na">POINT</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">tempPoint</span><span class="o">?.</span><span class="na">let</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">viewModel</span><span class="p">.</span><span class="na">addDrawElement</span><span class="p">(</span><span class="n">Point</span><span class="p">(</span><span class="nb">it</span><span class="p">.</span><span class="na">x</span><span class="p">,</span><span class="w"> </span><span class="nb">it</span><span class="p">.</span><span class="na">y</span><span class="p">,</span><span class="w"> </span><span class="n">currentColor</span><span class="p">))</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">drawingMode</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">DrawingMode</span><span class="p">.</span><span class="na">LINE</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">endPoint</span><span class="o">?.</span><span class="na">let</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">startPoint</span><span class="o">?.</span><span class="na">let</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">                </span><span class="n">viewModel</span><span class="p">.</span><span class="na">addDrawElement</span><span class="p">(</span>
<span class="w">                    </span><span class="n">Line</span><span class="p">(</span>
<span class="w">                        </span><span class="n">Point</span><span class="p">(</span><span class="n">start</span><span class="p">.</span><span class="na">x</span><span class="p">,</span><span class="w"> </span><span class="n">start</span><span class="p">.</span><span class="na">y</span><span class="p">,</span><span class="w"> </span><span class="n">currentColor</span><span class="p">),</span>
<span class="w">                        </span><span class="n">Point</span><span class="p">(</span><span class="nb">it</span><span class="p">.</span><span class="na">x</span><span class="p">,</span><span class="w"> </span><span class="nb">it</span><span class="p">.</span><span class="na">y</span><span class="p">,</span><span class="w"> </span><span class="n">currentColor</span><span class="p">),</span>
<span class="w">                        </span><span class="n">currentColor</span>
<span class="w">                    </span><span class="p">)</span>
<span class="w">                </span><span class="p">)</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">startPoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span>
<span class="w">    </span><span class="n">endPoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span>
<span class="w">    </span><span class="n">tempPoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span>
<span class="p">}</span>
</code></pre></div>
<p>Ennél az eseménynél már azt kezeljük mikor a felhasználó felemelte az újját a képernyőről. Itt is két lehetőségre bomlik az algoritmus, ugyanis, hogy ha pontról van szó, akkor csak a <code>tempPoint</code> értékét kell rögzíteni. Azonban, ha már vonalról, akkor az <code>endPoint</code> illetve a <code>startPoint</code> értékeit kell rögzíteni vonalként. <strong>Mindkét eseménynél szükséges a null ellenőrzés</strong>!</p>
<p>Miután az események megvannak, már csak a kirajzolást kell megoldani. Ezt úgy tehetjük meg, hogy a drawElements-be eltárolt adatokat egyesével kirajzoljuk típusuktól függően:</p>
<p><div class="highlight"><pre><span></span><code><span class="n">Canvas</span><span class="w"> </span><span class="p">(..){</span>
<span class="w">    </span><span class="n">drawElements</span><span class="p">.</span><span class="na">forEach</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">element</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">        </span><span class="k">when</span><span class="w"> </span><span class="p">(</span><span class="n">element</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">is</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">drawCircle</span><span class="p">(</span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element</span><span class="p">.</span><span class="na">color</span><span class="p">,</span><span class="w"> </span><span class="n">center</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Offset</span><span class="p">(</span><span class="n">element</span><span class="p">.</span><span class="na">x</span><span class="p">,</span><span class="w"> </span><span class="n">element</span><span class="p">.</span><span class="na">y</span><span class="p">),</span><span class="w"> </span><span class="n">radius</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5f</span><span class="p">)</span>
<span class="w">            </span><span class="k">is</span><span class="w"> </span><span class="n">Line</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">drawLine</span><span class="p">(</span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element</span><span class="p">.</span><span class="na">color</span><span class="p">,</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Offset</span><span class="p">(</span><span class="n">element</span><span class="p">.</span><span class="na">start</span><span class="p">.</span><span class="na">x</span><span class="p">,</span><span class="w"> </span><span class="n">element</span><span class="p">.</span><span class="na">start</span><span class="p">.</span><span class="na">y</span><span class="p">),</span><span class="w"> </span><span class="n">end</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Offset</span><span class="p">(</span><span class="n">element</span><span class="p">.</span><span class="na">end</span><span class="p">.</span><span class="na">x</span><span class="p">,</span><span class="w"> </span><span class="n">element</span><span class="p">.</span><span class="na">end</span><span class="p">.</span><span class="na">y</span><span class="p">),</span><span class="w"> </span><span class="n">strokeWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5f</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="p">...</span>
<span class="p">}</span>
</code></pre></div>
Ezzel kész is van a <code>DrawingCanvas</code>, azonban így még nem látjuk a rajzot, csak ha az ujjunkat felemeltük a kijelzőről. Ezt a következő képpen lehet javítani:</p>
<p><div class="highlight"><pre><span></span><code><span class="n">Canvas</span><span class="w"> </span><span class="p">(..){</span>
<span class="w">    </span><span class="p">...</span>
<span class="w">    </span><span class="n">tempPoint</span><span class="o">?.</span><span class="na">let</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">drawingMode</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">DrawingMode</span><span class="p">.</span><span class="na">POINT</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">drawCircle</span><span class="p">(</span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">currentColor</span><span class="p">,</span><span class="w"> </span><span class="n">center</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">it</span><span class="p">,</span><span class="w"> </span><span class="n">radius</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5f</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">drawingMode</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">DrawingMode</span><span class="p">.</span><span class="na">LINE</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">startPoint</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">drawLine</span><span class="p">(</span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">currentColor</span><span class="p">,</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">startPoint</span><span class="o">!!</span><span class="p">,</span><span class="w"> </span><span class="n">end</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">it</span><span class="p">,</span><span class="w"> </span><span class="n">strokeWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5f</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
Ebben az esetben kirajzoljuk azt az elemet aminek a kezdőpontja az a pont ahol lehelyeztük az ujjunkat, a végpontja pedig az ahol az ujjunk van. Ha ezt mozgatjuk akkor valós időben frissülni fog, így láthatjuk előre a végeredményt.</p>
<p>Ezután módosítsuk a <code>DrawingScreen</code>-t és cseréljük le a <code>Spacer</code>-t az imént elkészített <code>DrawingCanvas</code>-re.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Composable</span>
<span class="kd">fun</span><span class="w"> </span><span class="nf">DrawingScreen</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">viewModel</span><span class="p">:</span><span class="w"> </span><span class="n">DrawingViewModel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">viewModel</span><span class="p">(</span>
<span class="w">        </span><span class="n">factory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ViewModelProvider</span><span class="p">.</span><span class="na">AndroidViewModelFactory</span><span class="p">(</span>
<span class="w">            </span><span class="n">LocalContext</span><span class="p">.</span><span class="na">current</span><span class="p">.</span><span class="na">applicationContext</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">Application</span>
<span class="w">        </span><span class="p">)</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">drawingMode</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">viewModel</span><span class="p">.</span><span class="na">drawingMode</span><span class="p">.</span><span class="na">collectAsState</span><span class="p">()</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">drawElements</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">viewModel</span><span class="p">.</span><span class="na">drawElements</span><span class="p">.</span><span class="na">collectAsState</span><span class="p">()</span>
<span class="w">    </span><span class="n">Scaffold</span><span class="p">(</span>
<span class="w">        </span><span class="p">...</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">innerPadding</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">        </span><span class="n">DrawingCanvas</span><span class="p">(</span>
<span class="w">            </span><span class="n">modifier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Modifier</span>
<span class="w">                </span><span class="p">.</span><span class="na">padding</span><span class="p">(</span><span class="n">innerPadding</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">fillMaxSize</span><span class="p">(),</span>
<span class="w">            </span><span class="n">drawingMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">drawingMode</span><span class="p">,</span>
<span class="w">            </span><span class="n">viewModel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">viewModel</span><span class="p">,</span>
<span class="w">            </span><span class="n">drawElements</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">drawElements</span>
<span class="w">        </span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<div class="admonition example">
<p class="admonition-title">BEADANDÓ (1 pont)</p>
<p>Készíts egy <strong>képernyőképet</strong>, amelyen látszik az <strong>elkészült DrawingScreen</strong> (emulátoron, készüléket tükrözve vagy képernyőfelvétellel) pár vonallal és ponttal, <strong>a DrawingCanvas egy kódrészlete</strong>, valamint a <strong>neptun kódod a kódban valahol kommentként</strong>! A képet a megoldásban a repository-ba f3.png néven töltsd föl!</p>
<p>A képernyőkép szükséges feltétele a pontszám megszerzésének.</p>
</div>
<h2 id="perzisztencia-megvalositasa-sqlite-adatbazis-segitsegevel-1-pont">Perzisztencia megvalósítása <em>SQLite</em> adatbázis segítségével (1 pont)<a class="headerlink" href="#perzisztencia-megvalositasa-sqlite-adatbazis-segitsegevel-1-pont" title="Permanent link">&para;</a></h2>
<p>Ahhoz, hogy az általunk rajzolt objektumok megmaradjanak az alkalmazásból való kilépés után is, az adatainkat valahogy olyan formába kell rendeznünk, hogy azt könnyedén el tudjuk tárolni egy <em>SQLite</em> adatbázisban.</p>
<p>Hozzunk létre egy új package-et az <code>hu.bme.aut.android.simpledrawer</code>-en belül, aminek adjuk az <code>sqlite</code> nevet.</p>
<h3 id="tablak-definialasa">Táblák definiálása<a class="headerlink" href="#tablak-definialasa" title="Permanent link">&para;</a></h3>
<p>Az adatbáziskezelés során sok konstans jellegű változóval kell dolgoznunk, mint például a táblákban lévő oszlopok nevei, táblák neve, adatbázis fájl neve, séma létrehozó és törlő szkiptek, stb. Ezeket érdemes egy közös helyen tárolni, így szerkesztéskor vagy új entitás bevezetésekor nem kell a forrásfájlok között ugrálni, valamint egyszerűbb a teljes adatbázist létrehozó és törlő szkripteket generálni. Hozzunk létre egy új singleton osztályt az <code>object</code> kulcsszóval az <code>sqlite</code> package-en belül <code>DbConstants</code> néven.</p>
<p>Ezen belül először is konstansként felvesszük az adatbázis nevét és verzióját is. Ha az adatbázisunk sémáján szeretnénk változtatni, akkor ez utóbbit kell inkrementálnunk, így elkerülhetjük az inkompatibilitás miatti nem kívánatos hibákat.</p>
<p><div class="highlight"><pre><span></span><code><span class="k">package</span><span class="w"> </span><span class="nn">hu.bme.aut.android.simpledrawer.sqlite</span>

<span class="kd">object</span><span class="w"> </span><span class="nc">DbConstants</span><span class="p">{</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">DATABASE_NAME</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;simpledrawer.db&quot;</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">DATABASE_VERSION</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span>

<span class="w">    </span><span class="c1">//Points</span>

<span class="w">    </span><span class="c1">//Lines</span>
<span class="p">}</span>
</code></pre></div>
Ezek után a <code>DbConstants</code> nevű osztályba hozzuk létre a <code>Point</code> osztályhoz a konstansokat. Az osztályokon belül létrehozunk egy <code>enum</code>-ot is, hogy könnyebben tudjuk kezelni a tábla oszlopait, majd konstansokban eltároljuk a tábla létrehozását szolgáló SQL utasítást valamint a tábla nevét is. Végezetül elkészítjük azokat a függvényeket, amelyeket a tábla létrehozásakor, illetve upgrade-elésekor kell meghívni:</p>
<div class="highlight"><pre><span></span><code><span class="kd">object</span><span class="w"> </span><span class="nc">Points</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">DATABASE_TABLE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;points&quot;</span>

<span class="w">    </span><span class="kd">enum</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">Columns</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">ID</span><span class="p">,</span><span class="w"> </span><span class="n">COORD_X</span><span class="p">,</span><span class="w"> </span><span class="n">COORD_Y</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">DATABASE_CREATE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;&quot;create table if not exists </span><span class="si">$</span><span class="n">DATABASE_TABLE</span><span class="s"> (</span>
<span class="s">        </span><span class="si">${</span><span class="n">Columns</span><span class="p">.</span><span class="na">ID</span><span class="p">.</span><span class="na">name</span><span class="si">}</span><span class="s"> integer primary key autoincrement,</span>
<span class="s">        </span><span class="si">${</span><span class="n">Columns</span><span class="p">.</span><span class="na">COORD_X</span><span class="p">.</span><span class="na">name</span><span class="si">}</span><span class="s"> real not null,</span>
<span class="s">        </span><span class="si">${</span><span class="n">Columns</span><span class="p">.</span><span class="na">COORD_Y</span><span class="p">.</span><span class="na">name</span><span class="si">}</span><span class="s"> real not null</span>
<span class="s">        );&quot;&quot;&quot;</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">DATABASE_DROP</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;drop table if exists </span><span class="si">$</span><span class="n">DATABASE_TABLE</span><span class="s">;&quot;</span>

<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">onCreate</span><span class="p">(</span><span class="n">database</span><span class="p">:</span><span class="w"> </span><span class="n">SQLiteDatabase</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">database</span><span class="p">.</span><span class="na">execSQL</span><span class="p">(</span><span class="n">DATABASE_CREATE</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">onUpgrade</span><span class="p">(</span><span class="n">database</span><span class="p">:</span><span class="w"> </span><span class="n">SQLiteDatabase</span><span class="p">,</span><span class="w"> </span><span class="n">oldVersion</span><span class="p">:</span><span class="w"> </span><span class="kt">Int</span><span class="p">,</span><span class="w"> </span><span class="n">newVersion</span><span class="p">:</span><span class="w"> </span><span class="kt">Int</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">database</span><span class="p">.</span><span class="na">execSQL</span><span class="p">(</span><span class="n">DATABASE_DROP</span><span class="p">)</span>
<span class="w">        </span><span class="n">onCreate</span><span class="p">(</span><span class="n">database</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Figyeljük meg, hogy a <code>DbConstants</code> osztályon belül létrehoztunk egy belső <code>Points</code> nevű osztályt, amiben a <code>Points</code> entitásokat tároló táblához tartozó konstans értékeket tároljuk. Amennyiben az alkalmazásunk több entitást is adatbázisban tárol, akkor érdemes az egyes osztályokhoz tartozó konstansokat külön-külön belső osztályokban tárolni. Így sokkal átláthatóbb és karbantarthatóbb lesz a kód, mint ha ömlesztve felvennénk a DbConstants-ba az összes tábla összes konstansát. Ezek a belső osztályok praktikusan ugyanolyan névvel léteznek, mint az entitás osztályok. Vegyük tehát fel hasonló módon a <code>Lines</code> nevű osztályt is:</p>
<div class="highlight"><pre><span></span><code><span class="kd">object</span><span class="w"> </span><span class="nc">Lines</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">DATABASE_TABLE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;lines&quot;</span>

<span class="w">    </span><span class="kd">enum</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">Columns</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">ID</span><span class="p">,</span><span class="w"> </span><span class="n">START_X</span><span class="p">,</span><span class="w"> </span><span class="n">START_Y</span><span class="p">,</span><span class="w"> </span><span class="n">END_X</span><span class="p">,</span><span class="w"> </span><span class="n">END_Y</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">DATABASE_CREATE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;&quot;create table if not exists </span><span class="si">$</span><span class="n">DATABASE_TABLE</span><span class="s"> (</span>
<span class="s">        </span><span class="si">${</span><span class="n">Columns</span><span class="p">.</span><span class="na">ID</span><span class="p">.</span><span class="na">name</span><span class="si">}</span><span class="s"> integer primary key autoincrement,</span>
<span class="s">        </span><span class="si">${</span><span class="n">Columns</span><span class="p">.</span><span class="na">START_X</span><span class="p">.</span><span class="na">name</span><span class="si">}</span><span class="s"> real not null,</span>
<span class="s">        </span><span class="si">${</span><span class="n">Columns</span><span class="p">.</span><span class="na">START_Y</span><span class="p">.</span><span class="na">name</span><span class="si">}</span><span class="s"> real not null,</span>
<span class="s">        </span><span class="si">${</span><span class="n">Columns</span><span class="p">.</span><span class="na">END_X</span><span class="p">.</span><span class="na">name</span><span class="si">}</span><span class="s"> real not null,</span>
<span class="s">        </span><span class="si">${</span><span class="n">Columns</span><span class="p">.</span><span class="na">END_Y</span><span class="p">.</span><span class="na">name</span><span class="si">}</span><span class="s"> real not null</span>
<span class="s">        );&quot;&quot;&quot;</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">DATABASE_DROP</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;drop table if exists </span><span class="si">$</span><span class="n">DATABASE_TABLE</span><span class="s">;&quot;</span>

<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">onCreate</span><span class="p">(</span><span class="n">database</span><span class="p">:</span><span class="w"> </span><span class="n">SQLiteDatabase</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">database</span><span class="p">.</span><span class="na">execSQL</span><span class="p">(</span><span class="n">DATABASE_CREATE</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">onUpgrade</span><span class="p">(</span><span class="n">database</span><span class="p">:</span><span class="w"> </span><span class="n">SQLiteDatabase</span><span class="p">,</span><span class="w"> </span><span class="n">oldVersion</span><span class="p">:</span><span class="w"> </span><span class="kt">Int</span><span class="p">,</span><span class="w"> </span><span class="n">newVersion</span><span class="p">:</span><span class="w"> </span><span class="kt">Int</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">database</span><span class="p">.</span><span class="na">execSQL</span><span class="p">(</span><span class="n">DATABASE_DROP</span><span class="p">)</span>
<span class="w">        </span><span class="n">onCreate</span><span class="p">(</span><span class="n">database</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Érdemes megfigyelni továbbá azt is, hogy az osztályokat nem a class kulcsszóval deklaráltuk. Helyette az <code>object</code>-et használjuk, amivel a Kotlin nyelv azt biztosítja számunkra, hogy a <code>DbConstants</code> és a benne lévő <code>Points</code> és <code>Lines</code> osztály is singletonként viselkednek, azaz az alkalmazás futtatásakor létrejön belőlük egy példány, további példányokat pedig nem lehet létrehozni belőlük.</p>
<h3 id="a-segedosztaly-letrehozasa">A segédosztály létrehozása<a class="headerlink" href="#a-segedosztaly-letrehozasa" title="Permanent link">&para;</a></h3>
<p>Az adatbázis létrehozásához szükség van egy olyan segédosztályra, ami létrehozza magát az adatbázist, és azon belül inicializálja a táblákat is. Esetünkben ez lesz a <code>DbHelper</code> osztály, ami az <code>SQLiteOpenHelper</code> osztályból származik. Vegyük fel ezt is az <code>sqlite</code> package-be.</p>
<div class="highlight"><pre><span></span><code><span class="k">package</span><span class="w"> </span><span class="nn">hu.bme.aut.android.simpledrawer.sqlite</span>

<span class="k">import</span><span class="w"> </span><span class="nn">android.content.Context</span>
<span class="k">import</span><span class="w"> </span><span class="nn">android.database.sqlite.SQLiteDatabase</span>
<span class="k">import</span><span class="w"> </span><span class="nn">android.database.sqlite.SQLiteOpenHelper</span>

<span class="kd">class</span><span class="w"> </span><span class="nc">DbHelper</span><span class="p">(</span><span class="n">context</span><span class="p">:</span><span class="w"> </span><span class="n">Context</span><span class="p">):</span>
<span class="w">    </span><span class="n">SQLiteOpenHelper</span><span class="p">(</span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="n">DbConstants</span><span class="p">.</span><span class="na">DATABASE_NAME</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="n">DbConstants</span><span class="p">.</span><span class="na">DATABASE_VERSION</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">onCreate</span><span class="p">(</span><span class="n">sqLiteDatabase</span><span class="p">:</span><span class="w"> </span><span class="n">SQLiteDatabase</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">DbConstants</span><span class="p">.</span><span class="na">Lines</span><span class="p">.</span><span class="na">onCreate</span><span class="p">(</span><span class="n">sqLiteDatabase</span><span class="p">)</span>
<span class="w">        </span><span class="n">DbConstants</span><span class="p">.</span><span class="na">Points</span><span class="p">.</span><span class="na">onCreate</span><span class="p">(</span><span class="n">sqLiteDatabase</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">onUpgrade</span><span class="p">(</span>
<span class="w">        </span><span class="n">sqLiteDatabase</span><span class="p">:</span><span class="w"> </span><span class="n">SQLiteDatabase</span><span class="p">,</span>
<span class="w">        </span><span class="n">oldVersion</span><span class="p">:</span><span class="w"> </span><span class="kt">Int</span><span class="p">,</span>
<span class="w">        </span><span class="n">newVersion</span><span class="p">:</span><span class="w"> </span><span class="kt">Int</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">DbConstants</span><span class="p">.</span><span class="na">Lines</span><span class="p">.</span><span class="na">onUpgrade</span><span class="p">(</span><span class="n">sqLiteDatabase</span><span class="p">,</span><span class="w"> </span><span class="n">oldVersion</span><span class="p">,</span><span class="w"> </span><span class="n">newVersion</span><span class="p">)</span>
<span class="w">        </span><span class="n">DbConstants</span><span class="p">.</span><span class="na">Points</span><span class="p">.</span><span class="na">onUpgrade</span><span class="p">(</span><span class="n">sqLiteDatabase</span><span class="p">,</span><span class="w"> </span><span class="n">oldVersion</span><span class="p">,</span><span class="w"> </span><span class="n">newVersion</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Ezen kívül szükségünk van még egy olyan segédosztályra is, ami ezt az egészet összefogja, és amivel egyszerűen tudjuk kezelni az adatbázisunkat. Ez lesz a <code>PersistentDataHelper</code> továbbra is az <code>sqlite</code> package-ben. Ebben olyan függényeket fogunk megvalósítani, mint pl. az <code>open()</code> és a <code>close()</code>, amikkel az adatbáziskapcsolatot nyithatjuk meg, illetve zárhatjuk le. Ezen kívül ebben az osztályban valósítjuk meg azokat a függvényeket is, amik az adatok adatbázisba való kiírásáért, illetve az onnan való kiolvasásáért felelősek. Figyeljünk rá, hogy a saját Point osztályunkat válasszuk az import során.</p>
<div class="highlight"><pre><span></span><code><span class="k">package</span><span class="w"> </span><span class="nn">hu.bme.aut.android.simpledrawer.sqlite</span>

<span class="k">import</span><span class="w"> </span><span class="nn">android.content.Context</span>
<span class="k">import</span><span class="w"> </span><span class="nn">android.database.sqlite.SQLiteDatabase</span>
<span class="k">import</span><span class="w"> </span><span class="nn">android.database.sqlite.SQLiteException</span>

<span class="kd">class</span><span class="w"> </span><span class="nc">PersistentDataHelper</span><span class="p">(</span><span class="n">context</span><span class="p">:</span><span class="w"> </span><span class="n">Context</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">var</span><span class="w"> </span><span class="nv">database</span><span class="p">:</span><span class="w"> </span><span class="n">SQLiteDatabase? </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">dbHelper</span><span class="p">:</span><span class="w"> </span><span class="n">DbHelper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DbHelper</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>


<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">pointColumns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arrayOf</span><span class="p">(</span>
<span class="w">        </span><span class="n">DbConstants</span><span class="p">.</span><span class="na">Points</span><span class="p">.</span><span class="na">Columns</span><span class="p">.</span><span class="na">ID</span><span class="p">.</span><span class="na">name</span><span class="p">,</span>
<span class="w">        </span><span class="n">DbConstants</span><span class="p">.</span><span class="na">Points</span><span class="p">.</span><span class="na">Columns</span><span class="p">.</span><span class="na">COORD_X</span><span class="p">.</span><span class="na">name</span><span class="p">,</span>
<span class="w">        </span><span class="n">DbConstants</span><span class="p">.</span><span class="na">Points</span><span class="p">.</span><span class="na">Columns</span><span class="p">.</span><span class="na">COORD_Y</span><span class="p">.</span><span class="na">name</span><span class="p">,</span>
<span class="w">    </span><span class="p">)</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">lineColumns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arrayOf</span><span class="p">(</span>
<span class="w">        </span><span class="n">DbConstants</span><span class="p">.</span><span class="na">Lines</span><span class="p">.</span><span class="na">Columns</span><span class="p">.</span><span class="na">ID</span><span class="p">.</span><span class="na">name</span><span class="p">,</span>
<span class="w">        </span><span class="n">DbConstants</span><span class="p">.</span><span class="na">Lines</span><span class="p">.</span><span class="na">Columns</span><span class="p">.</span><span class="na">START_X</span><span class="p">.</span><span class="na">name</span><span class="p">,</span>
<span class="w">        </span><span class="n">DbConstants</span><span class="p">.</span><span class="na">Lines</span><span class="p">.</span><span class="na">Columns</span><span class="p">.</span><span class="na">START_Y</span><span class="p">.</span><span class="na">name</span><span class="p">,</span>
<span class="w">        </span><span class="n">DbConstants</span><span class="p">.</span><span class="na">Lines</span><span class="p">.</span><span class="na">Columns</span><span class="p">.</span><span class="na">END_X</span><span class="p">.</span><span class="na">name</span><span class="p">,</span>
<span class="w">        </span><span class="n">DbConstants</span><span class="p">.</span><span class="na">Lines</span><span class="p">.</span><span class="na">Columns</span><span class="p">.</span><span class="na">END_Y</span><span class="p">.</span><span class="na">name</span><span class="p">,</span>
<span class="w">    </span><span class="p">)</span>


<span class="w">    </span><span class="nd">@Throws</span><span class="p">(</span><span class="n">SQLiteException</span><span class="o">::</span><span class="n">class</span><span class="p">)</span>
<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">open</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">database</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dbHelper</span><span class="p">.</span><span class="na">writableDatabase</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">close</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">dbHelper</span><span class="p">.</span><span class="na">close</span><span class="p">()</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">//PersistPoints</span>


<span class="w">    </span><span class="c1">//RestorePoints</span>


<span class="w">    </span><span class="c1">//ClearPoints</span>


<span class="w">    </span><span class="c1">//CursorToPoint</span>


<span class="w">    </span><span class="c1">//PersistLines</span>


<span class="w">    </span><span class="c1">//RestoreLines</span>


<span class="w">    </span><span class="c1">//ClearLines</span>


<span class="w">    </span><span class="c1">//CursorToLine</span>

<span class="p">}</span>
</code></pre></div>
<p>Egészítsük ki a <code>PersistentDataHelper</code> osztályt az alábbiak szerint:</p>
<ol>
<li>PersistPoints: Itt kell megvalósítanunk a pontok eltárolását. Elsősorban ürítjük az adatbázist, utána pedig a kapott Lista paraméteren végigmegyünk és egyesével elmentjük a pontokat.</li>
<li>RestorePoints: Itt kell megvalósítanunk a pontok betöltését. Ehhez egy ideiglenes MutableList-et használunk, amelyhez hozzáadjuk a kiolvasott pontokat.</li>
<li>ClearPoints: Ezzel a függvénnyel érjük el hogy az adatbázisból töröljük a Points táblát.</li>
<li>CursorToPoint: Ezzel a függvénnyel olvasunk ki egyetlen pontnak az adatát az adatbázisból.</li>
<li>PersistLines: Itt kell megvalósítanunk a vonalak eltárolását. Elsősorban ürítjük az adatbázist, utána pedig a kapott Lista paraméteren végigmegyünk és egyesével elmentjük a vonalakat.</li>
<li>RestoreLines: Itt kell megvalósítanunk a vonalak betöltését. Ehhez egy ideiglenes MutableList-et használunk, amelyhez hozzáadjuk a kiolvasott vonalakat.</li>
<li>ClearLines: Ezzel a függvénnyel érjük el hogy az adatbázisból töröljük a Lines táblát.</li>
<li>CursorToLine: Ezzel a függvénnyel olvasunk ki egyetlen vonalnak adatát az adatbázisból.</li>
</ol>
<p><strong>1. PersistPoints</strong>
<div class="highlight"><pre><span></span><code><span class="kd">fun</span><span class="w"> </span><span class="nf">persistPoints</span><span class="p">(</span><span class="n">points</span><span class="p">:</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Point</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">clearPoints</span><span class="p">()</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">point</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">points</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ContentValues</span><span class="p">()</span>
<span class="w">        </span><span class="n">values</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">DbConstants</span><span class="p">.</span><span class="na">Points</span><span class="p">.</span><span class="na">Columns</span><span class="p">.</span><span class="na">COORD_X</span><span class="p">.</span><span class="na">name</span><span class="p">,</span><span class="w"> </span><span class="n">point</span><span class="p">.</span><span class="na">x</span><span class="p">)</span>
<span class="w">        </span><span class="n">values</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">DbConstants</span><span class="p">.</span><span class="na">Points</span><span class="p">.</span><span class="na">Columns</span><span class="p">.</span><span class="na">COORD_Y</span><span class="p">.</span><span class="na">name</span><span class="p">,</span><span class="w"> </span><span class="n">point</span><span class="p">.</span><span class="na">y</span><span class="p">)</span>
<span class="w">        </span><span class="n">database</span><span class="o">!!</span><span class="p">.</span><span class="na">insert</span><span class="p">(</span><span class="n">DbConstants</span><span class="p">.</span><span class="na">Points</span><span class="p">.</span><span class="na">DATABASE_TABLE</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="n">values</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<strong>2. RestorePoints</strong>
<div class="highlight"><pre><span></span><code><span class="kd">fun</span><span class="w"> </span><span class="nf">restorePoints</span><span class="p">():</span><span class="w"> </span><span class="n">MutableList</span><span class="o">&lt;</span><span class="n">Point</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">points</span><span class="p">:</span><span class="w"> </span><span class="n">MutableList</span><span class="o">&lt;</span><span class="n">Point</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ArrayList</span><span class="p">()</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">cursor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">database</span><span class="o">!!</span><span class="p">.</span><span class="na">query</span><span class="p">(</span>
<span class="w">        </span><span class="n">DbConstants</span><span class="p">.</span><span class="na">Points</span><span class="p">.</span><span class="na">DATABASE_TABLE</span><span class="p">,</span>
<span class="w">        </span><span class="n">pointColumns</span><span class="p">,</span>
<span class="w">        </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="kc">null</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">    </span><span class="n">cursor</span><span class="p">.</span><span class="na">moveToFirst</span><span class="p">()</span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">cursor</span><span class="p">.</span><span class="na">isAfterLast</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">point</span><span class="p">:</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cursorToPoint</span><span class="p">(</span><span class="n">cursor</span><span class="p">)</span>
<span class="w">        </span><span class="n">points</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">point</span><span class="p">)</span>
<span class="w">        </span><span class="n">cursor</span><span class="p">.</span><span class="na">moveToNext</span><span class="p">()</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">cursor</span><span class="p">.</span><span class="na">close</span><span class="p">()</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">points</span>
<span class="p">}</span>
</code></pre></div></p>
<p><strong>3. ClearPoints</strong>
<div class="highlight"><pre><span></span><code><span class="kd">fun</span><span class="w"> </span><span class="nf">clearPoints</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">database</span><span class="o">!!</span><span class="p">.</span><span class="na">delete</span><span class="p">(</span><span class="n">DbConstants</span><span class="p">.</span><span class="na">Points</span><span class="p">.</span><span class="na">DATABASE_TABLE</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></p>
<p><strong>4. CursorToPoints</strong>
<div class="highlight"><pre><span></span><code><span class="kd">private</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">cursorToPoint</span><span class="p">(</span><span class="n">cursor</span><span class="p">:</span><span class="w"> </span><span class="n">Cursor</span><span class="p">):</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">point</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Point</span><span class="p">(</span>
<span class="w">        </span><span class="n">cursor</span><span class="p">.</span><span class="na">getFloat</span><span class="p">(</span><span class="n">DbConstants</span><span class="p">.</span><span class="na">Points</span><span class="p">.</span><span class="na">Columns</span><span class="p">.</span><span class="na">COORD_X</span><span class="p">.</span><span class="na">ordinal</span><span class="p">),</span>
<span class="w">        </span><span class="n">cursor</span><span class="p">.</span><span class="na">getFloat</span><span class="p">(</span><span class="n">DbConstants</span><span class="p">.</span><span class="na">Points</span><span class="p">.</span><span class="na">Columns</span><span class="p">.</span><span class="na">COORD_Y</span><span class="p">.</span><span class="na">ordinal</span><span class="p">),</span>
<span class="w">        </span><span class="n">Color</span><span class="p">(</span><span class="n">Color</span><span class="p">.</span><span class="na">Red</span><span class="p">.</span><span class="na">toArgb</span><span class="p">())</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">point</span>
<span class="p">}</span>
</code></pre></div></p>
<p><strong>5. PersistLines</strong>
<div class="highlight"><pre><span></span><code><span class="kd">fun</span><span class="w"> </span><span class="nf">persistLines</span><span class="p">(</span><span class="n">lines</span><span class="p">:</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Line</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">clearLines</span><span class="p">()</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">line</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">lines</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ContentValues</span><span class="p">()</span>
<span class="w">        </span><span class="n">values</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">DbConstants</span><span class="p">.</span><span class="na">Lines</span><span class="p">.</span><span class="na">Columns</span><span class="p">.</span><span class="na">START_X</span><span class="p">.</span><span class="na">name</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="p">.</span><span class="na">start</span><span class="p">.</span><span class="na">x</span><span class="p">)</span>
<span class="w">        </span><span class="n">values</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">DbConstants</span><span class="p">.</span><span class="na">Lines</span><span class="p">.</span><span class="na">Columns</span><span class="p">.</span><span class="na">START_Y</span><span class="p">.</span><span class="na">name</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="p">.</span><span class="na">start</span><span class="p">.</span><span class="na">y</span><span class="p">)</span>
<span class="w">        </span><span class="n">values</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">DbConstants</span><span class="p">.</span><span class="na">Lines</span><span class="p">.</span><span class="na">Columns</span><span class="p">.</span><span class="na">END_X</span><span class="p">.</span><span class="na">name</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="p">.</span><span class="na">end</span><span class="p">.</span><span class="na">x</span><span class="p">)</span>
<span class="w">        </span><span class="n">values</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">DbConstants</span><span class="p">.</span><span class="na">Lines</span><span class="p">.</span><span class="na">Columns</span><span class="p">.</span><span class="na">END_Y</span><span class="p">.</span><span class="na">name</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="p">.</span><span class="na">end</span><span class="p">.</span><span class="na">y</span><span class="p">)</span>
<span class="w">        </span><span class="n">database</span><span class="o">!!</span><span class="p">.</span><span class="na">insert</span><span class="p">(</span><span class="n">DbConstants</span><span class="p">.</span><span class="na">Lines</span><span class="p">.</span><span class="na">DATABASE_TABLE</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="n">values</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<strong>6. RestoreLines</strong>
<div class="highlight"><pre><span></span><code><span class="kd">fun</span><span class="w"> </span><span class="nf">restoreLines</span><span class="p">():</span><span class="w"> </span><span class="n">MutableList</span><span class="o">&lt;</span><span class="n">Line</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">lines</span><span class="p">:</span><span class="w"> </span><span class="n">MutableList</span><span class="o">&lt;</span><span class="n">Line</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ArrayList</span><span class="p">()</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">cursor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">database</span><span class="o">!!</span><span class="p">.</span><span class="na">query</span><span class="p">(</span>
<span class="w">        </span><span class="n">DbConstants</span><span class="p">.</span><span class="na">Lines</span><span class="p">.</span><span class="na">DATABASE_TABLE</span><span class="p">,</span>
<span class="w">        </span><span class="n">lineColumns</span><span class="p">,</span>
<span class="w">        </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="kc">null</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">    </span><span class="n">cursor</span><span class="p">.</span><span class="na">moveToFirst</span><span class="p">()</span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">cursor</span><span class="p">.</span><span class="na">isAfterLast</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">line</span><span class="p">:</span><span class="w"> </span><span class="n">Line</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cursorToLine</span><span class="p">(</span><span class="n">cursor</span><span class="p">)</span>
<span class="w">        </span><span class="n">lines</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
<span class="w">        </span><span class="n">cursor</span><span class="p">.</span><span class="na">moveToNext</span><span class="p">()</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">cursor</span><span class="p">.</span><span class="na">close</span><span class="p">()</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">lines</span>
<span class="p">}</span>
</code></pre></div></p>
<p><strong>7. ClearLines</strong>
<div class="highlight"><pre><span></span><code><span class="kd">fun</span><span class="w"> </span><span class="nf">clearLines</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">database</span><span class="o">!!</span><span class="p">.</span><span class="na">delete</span><span class="p">(</span><span class="n">DbConstants</span><span class="p">.</span><span class="na">Lines</span><span class="p">.</span><span class="na">DATABASE_TABLE</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></p>
<p><strong>8. CursorToLine</strong>
<div class="highlight"><pre><span></span><code><span class="kd">private</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">cursorToLine</span><span class="p">(</span><span class="n">cursor</span><span class="p">:</span><span class="w"> </span><span class="n">Cursor</span><span class="p">):</span><span class="w"> </span><span class="n">Line</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">line</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Line</span><span class="p">(</span>
<span class="w">        </span><span class="n">Point</span><span class="p">(</span>
<span class="w">            </span><span class="n">cursor</span><span class="p">.</span><span class="na">getFloat</span><span class="p">(</span><span class="n">DbConstants</span><span class="p">.</span><span class="na">Lines</span><span class="p">.</span><span class="na">Columns</span><span class="p">.</span><span class="na">START_X</span><span class="p">.</span><span class="na">ordinal</span><span class="p">),</span>
<span class="w">            </span><span class="n">cursor</span><span class="p">.</span><span class="na">getFloat</span><span class="p">(</span><span class="n">DbConstants</span><span class="p">.</span><span class="na">Lines</span><span class="p">.</span><span class="na">Columns</span><span class="p">.</span><span class="na">START_Y</span><span class="p">.</span><span class="na">ordinal</span><span class="p">)</span>
<span class="w">        </span><span class="p">),</span>
<span class="w">        </span><span class="n">Point</span><span class="p">(</span>
<span class="w">            </span><span class="n">cursor</span><span class="p">.</span><span class="na">getFloat</span><span class="p">(</span><span class="n">DbConstants</span><span class="p">.</span><span class="na">Lines</span><span class="p">.</span><span class="na">Columns</span><span class="p">.</span><span class="na">END_X</span><span class="p">.</span><span class="na">ordinal</span><span class="p">),</span>
<span class="w">            </span><span class="n">cursor</span><span class="p">.</span><span class="na">getFloat</span><span class="p">(</span><span class="n">DbConstants</span><span class="p">.</span><span class="na">Lines</span><span class="p">.</span><span class="na">Columns</span><span class="p">.</span><span class="na">END_Y</span><span class="p">.</span><span class="na">ordinal</span><span class="p">)</span>
<span class="w">        </span><span class="p">),</span>
<span class="w">        </span><span class="n">Color</span><span class="p">(</span><span class="n">Color</span><span class="p">.</span><span class="na">Red</span><span class="p">.</span><span class="na">toArgb</span><span class="p">())</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">line</span>
<span class="p">}</span>
</code></pre></div></p>
<h3 id="viewmodel-kiegeszitese">ViewModel kiegészítése<a class="headerlink" href="#viewmodel-kiegeszitese" title="Permanent link">&para;</a></h3>
<p>Ahhoz hogy a perzisztencia rendesen működjön ki kell egészítenünk a viewModel-t, úgy hogy minden egyes rajzolás után elmentse az adatbázisba az adatokat. Így az adataink akkor is megmaradnak, ha újraindítjuk az alkalmazást. Ahhoz hogy ezt lássuk is újra a rajzoló felületen, be is kell tölteni a rajzot. Ebben szerpet fog játszani az <code>init{}</code> blokk.</p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">DrawingViewModel</span><span class="p">(</span><span class="n">application</span><span class="p">:</span><span class="w"> </span><span class="n">Application</span><span class="p">):</span><span class="w"> </span><span class="n">AndroidViewModel</span><span class="p">(</span><span class="n">application</span><span class="p">){</span>


<span class="w">    </span><span class="c1">//DrawingMode</span>

<span class="w">    </span><span class="c1">//DrawElements</span>


<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">dataHelper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PersistentDataHelper</span><span class="p">(</span><span class="n">application</span><span class="p">)</span>


<span class="w">    </span><span class="k">init</span><span class="p">{</span>
<span class="w">        </span><span class="n">loadDrawElements</span><span class="p">()</span>
<span class="w">    </span><span class="p">}</span>


<span class="w">    </span><span class="c1">//setDrawingMode</span>


<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">addDrawElement</span><span class="p">(</span><span class="n">element</span><span class="p">:</span><span class="w"> </span><span class="kt">Any</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">viewModelScope</span><span class="p">.</span><span class="na">launch</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">_drawElements</span><span class="p">.</span><span class="na">value</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">element</span>
<span class="w">            </span><span class="n">saveDrawElements</span><span class="p">()</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>


<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">saveDrawElements</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">viewModelScope</span><span class="p">.</span><span class="na">launch</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">dataHelper</span><span class="p">.</span><span class="na">open</span><span class="p">()</span>
<span class="w">            </span><span class="n">dataHelper</span><span class="p">.</span><span class="na">clearPoints</span><span class="p">()</span>
<span class="w">            </span><span class="n">dataHelper</span><span class="p">.</span><span class="na">clearLines</span><span class="p">()</span>
<span class="w">            </span><span class="kd">val</span><span class="w"> </span><span class="nv">points</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_drawElements</span><span class="p">.</span><span class="na">value</span><span class="p">.</span><span class="na">filterIsInstance</span><span class="o">&lt;</span><span class="n">Point</span><span class="o">&gt;</span><span class="p">()</span>
<span class="w">            </span><span class="kd">val</span><span class="w"> </span><span class="nv">lines</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_drawElements</span><span class="p">.</span><span class="na">value</span><span class="p">.</span><span class="na">filterIsInstance</span><span class="o">&lt;</span><span class="n">Line</span><span class="o">&gt;</span><span class="p">()</span>
<span class="w">            </span><span class="n">dataHelper</span><span class="p">.</span><span class="na">persistPoints</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>
<span class="w">            </span><span class="n">dataHelper</span><span class="p">.</span><span class="na">persistLines</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
<span class="w">            </span><span class="n">dataHelper</span><span class="p">.</span><span class="na">close</span><span class="p">()</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">loadDrawElements</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">viewModelScope</span><span class="p">.</span><span class="na">launch</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">dataHelper</span><span class="p">.</span><span class="na">open</span><span class="p">()</span>
<span class="w">            </span><span class="kd">val</span><span class="w"> </span><span class="nv">points</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dataHelper</span><span class="p">.</span><span class="na">restorePoints</span><span class="p">()</span>
<span class="w">            </span><span class="kd">val</span><span class="w"> </span><span class="nv">lines</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dataHelper</span><span class="p">.</span><span class="na">restoreLines</span><span class="p">()</span>
<span class="w">            </span><span class="n">_drawElements</span><span class="p">.</span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">points</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">lines</span>
<span class="w">            </span><span class="n">dataHelper</span><span class="p">.</span><span class="na">close</span><span class="p">()</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Láthatjuk, hogy az <code>init{}</code> blokkban meghívódik a <code>loadDrawElements()</code> aminek a segítségével, kiolvassuk a korábban definiált <code>restorePoints</code> és <code>restoreLines</code> függvényekkel az adatokat az adatbázisból, majd hozzáadjuk a Listánkhoz.</p>
<p>A mentés hasonló módon működik csak ezt a függvényt akkor hívjuk, hogyha rajzoltunk.</p>
<div class="admonition example">
<p class="admonition-title">BEADANDÓ (1 pont)</p>
<p>Készíts egy <strong>képernyőképet</strong>, amelyen látszik az <strong>elkészült DrawingScreen</strong> (emulátoron, készüléket tükrözve vagy képernyőfelvétellel) pár vonallal és ponttal, és az <strong>ahhoz tartozó kódrészlet</strong>, valamint a <strong>neptun kódod a kódban valahol kommentként</strong>! A képet a megoldásban a repository-ba f4.png néven töltsd föl! </p>
<p>A képernyőkép szükséges feltétele a pontszám megszerzésének.</p>
</div>
<h2 id="onallo-feladat-a-vaszon-torlese-1-pont">Önállo feladat: A vászon törlése (1 pont)<a class="headerlink" href="#onallo-feladat-a-vaszon-torlese-1-pont" title="Permanent link">&para;</a></h2>
<p>A <em>BottomBar</em>-on vegyünk fel egy új vezérlőt, ami a törlésért felelős! Ennek megnyomása esetén egy dialógus ablak ugorjon fel, és figyelmeztessen minket, hogy a törlés nem visszavonható! Legyen egy pozitív és egy negatív gombja!</p>
<p>A gomb iconja legyen a <code>R.drawable.ic_clear_canvas</code>!</p>
<div class="admonition example">
<p class="admonition-title">BEADANDÓ (1 pont)</p>
<p>Készíts egy <strong>képernyőképet</strong>, amelyen látszik a <strong>törlést megerősítő dialógus ablak</strong> (emulátoron, készüléket tükrözve vagy képernyőfelvétellel), a <strong>törlést elvégző kódrészlet</strong>, valamint a <strong>neptun kódod a kódban valahol kommentként</strong>! A képet a megoldásban a repository-ba f5.png néven töltsd föl!</p>
<p>A képernyőkép szükséges feltétele a pontszám megszerzésének.</p>
</div>
<h2 id="imsc-feladat-2-imsc-pont">iMSc feladat (2 iMSc pont)<a class="headerlink" href="#imsc-feladat-2-imsc-pont" title="Permanent link">&para;</a></h2>
<p>Vegyünk fel az alkalmazásba egy olyan vezérlőt, amivel változtatni lehet a rajzolás színét a 3 fő szín között (<em>RGB</em>).</p>
<p><strong>Figyelem:</strong> az adatbázisban is el kell menteni az adott objektum színét!</p>
<div class="admonition tip">
<p class="admonition-title">Adatbázis</p>
<p>Érdemes Wipe Data-t indítani, vagy verziót váltani az adatbázisnál, hogy ha változtatjuk a felépítését.</p>
</div>
<div class="admonition example">
<p class="admonition-title">BEADANDÓ (1 iMSc pont)</p>
<p>Készíts egy <strong>képernyőképet</strong>, amelyen látszik a <strong>rajzoló oldal a különböző színekkel</strong> (emulátoron, készüléket tükrözve vagy képernyőfelvétellel), egy <strong>ahhoz tartozó kódrészlet</strong>, valamint a <strong>neptun kódod a kódban valahol kommentként</strong>! A képet a megoldásban a repository-ba f6.png néven töltsd föl!</p>
<p>A képernyőkép szükséges feltétele a pontszám megszerzésének.</p>
</div>
<div class="admonition example">
<p class="admonition-title">BEADANDÓ (1 iMSc pont)</p>
<p>Készíts egy <strong>képernyőképet</strong>, amelyen látszik a <strong>különböző színek mentését végző kódrészletet</strong>, valamint a <strong>neptun kódod a kódban valahol kommentként</strong>! A képet a megoldásban a repository-ba f7.png néven töltsd föl!</p>
<p>A képernyőkép szükséges feltétele a pontszám megszerzésének.</p>
</div>

    <hr>
  <div class="md-source-file">
    <span class="md-source-file__fact"> <span class="md-icon" title="Utolsó frissítés"> <svg
          xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
          <path
            d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z">
          </path>
        </svg>
      </span>
      <span title="2024. október 5. 23:53:54">
        <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="2024. október 5. 23:53:54 CEST"><span class="timeago" datetime="2024-10-05T23:53:54+02:00" locale="hu"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="2024. október 5. 23:53:54 CEST">2024-10-05</span>
      </span>
    </span>

    

    <span class="md-source-file__fact">
      <span class="md-icon" title="Szerzők">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
          <path
            d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z">
          </path>
        </svg>
      </span>
      <span>Szerzők</span>
      <nav><a href="https://github.com/laszlokissm" target="_blank" rel="noopener noreferrer" class="md-author" title="@laszlokissm">
          <img src="https://avatars.githubusercontent.com/u/144819306?v=4?size=72" alt="@laszlokissm">
        </a><a href="https://github.com/web-flow" target="_blank" rel="noopener noreferrer" class="md-author" title="@web-flow">
          <img src="https://avatars.githubusercontent.com/u/19864447?v=4?size=72" alt="@web-flow">
        </a><a href="https://github.com/gazdilaci" target="_blank" rel="noopener noreferrer" class="md-author" title="@gazdilaci">
          <img src="https://avatars.githubusercontent.com/u/23335752?v=4?size=72" alt="@gazdilaci">
        </a><a href="https://github.com/AlmosF" target="_blank" rel="noopener noreferrer" class="md-author" title="@AlmosF">
          <img src="https://avatars.githubusercontent.com/u/92093359?v=4?size=72" alt="@AlmosF">
        </a><a href="https://github.com/tibitoth" target="_blank" rel="noopener noreferrer" class="md-author" title="@tibitoth">
          <img src="https://avatars.githubusercontent.com/u/8333960?v=4?size=72" alt="@tibitoth">
        </a><a href="https://github.com/zoli0" target="_blank" rel="noopener noreferrer" class="md-author" title="@zoli0">
          <img src="https://avatars.githubusercontent.com/u/24962402?v=4?size=72" alt="@zoli0">
        </a><a href="https://github.com/danim1130" target="_blank" rel="noopener noreferrer" class="md-author" title="@danim1130">
          <img src="https://avatars.githubusercontent.com/u/8405234?v=4?size=72" alt="@danim1130">
        </a><a href="https://github.com/perryd01" target="_blank" rel="noopener noreferrer" class="md-author" title="@perryd01">
          <img src="https://avatars.githubusercontent.com/u/46491285?v=4?size=72" alt="@perryd01">
        </a></nav>      
    </span>
  </div>





                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; BME VIK AUT
    </div>
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.instant", "navigation.top", "search.suggest", "content.code.copy"], "search": "../../assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "V\u00e1g\u00f3lapra m\u00e1solva", "clipboard.copy": "M\u00e1sol\u00e1s v\u00e1g\u00f3lapra", "search.result.more.one": "1 tov\u00e1bbi tal\u00e1lat az oldalon", "search.result.more.other": "# tov\u00e1bbi tal\u00e1lat az oldalon", "search.result.none": "Nincs tal\u00e1lat", "search.result.one": "1 egyez\u0151 dokumentum", "search.result.other": "# egyez\u0151 dokumentum", "search.result.placeholder": "Keres\u00e9shez \u00edrj ide valamit", "search.result.term.missing": "\u00dcres", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.ba449ae6.min.js"></script>
      
        <script src="../../js/timeago.min.js"></script>
      
        <script src="../../js/timeago_mkdocs_material.js"></script>
      
    
  </body>
</html>